<!doctype html>
<html class="no-js" lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Hugo 0.78.1" />

  <title> HTTP 요청에 body를 붙여서 보내면 어떤 일이 벌어질까? part 2 &middot; /usr/lib/libsora.so </title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="naver-site-verification" content="2ddc1a56777489f4a64a4f6a59822f8b1c1ea502"/>
  <meta name="google-site-verification" content="VsvNNnJZUV-iLEYKNju16p-HtDqZeqL15H-VVy-HwpA" />

  <meta name="gc:client-id" content="785d47c81cbc2fd42b65">
  <meta name="gc:client-secret" content="5e5d558f0b16fae154aa47fc9d94f7c09e540ec7">

  
  <meta name="author" content="if1live" />
  

  
  <meta name="description" content="HTTP 요청에 body를 붙여서 보내면 어떤 일이 벌어질까? part 2" />
  

  
  <meta name="keywords" content="http, design" />
  

  
  
<meta name="twitter:card" content="summary">
<meta name="og:url" content="https://libsora.so/posts/http-request-with-body-and-java-httpurlconnection/">

<meta name="twitter:site" content="@if1live">


<meta name="twitter:title" content="HTTP 요청에 body를 붙여서 보내면 어떤 일이 벌어질까? part 2">
<meta name="twitter:description" content="삽질의 시작 이전에 HTTP GET 요청에 body를 붙여서 보내면 어떤 일이 벌어질까?를 썼다. 나중에 자바의 HttpURLConnection의 동작이 안드로이드 버전의 UnityWebRequest와 똑같다는 소리를 들었다. 유니티 개발자들이 HTTP 라이브러리 만들기 귀찮아서 플랫폼별로 내장된 HTTP 라이브러리를 쓴거 아닐까? 하는 망상을 했다. 그래">

<meta name="twitter:image:src" content="https://www.gravatar.com/avatar/fb9672e7e0d256f39369595381d1ea07">



  

  
  
  <link rel="stylesheet" href="https://libsora.so/css/style-gen.css?2">

  
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

  
  <link href="https://libsora.so/index.xml" rel="alternate" type="application/rss+xml" title="/usr/lib/libsora.so" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/themes/prism.min.css"
  integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ=="
  crossorigin="anonymous" />
<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/plugins/line-numbers/prism-line-numbers.min.css"
  integrity="sha512-cbQXwDFK7lj2Fqfkuxbo5iD1dSbLlJGXGpfTDqbggqjHJeyzx88I3rfwjS38WJag/ihH7lzuGlGHpDBymLirZQ=="
  crossorigin="anonymous" />

  
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css"
  integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw=="
  crossorigin="anonymous" />


  
  <script type="text/javascript">
    var host = "libsora.so";
    if ((host == window.location.host) && (window.location.protocol != "https:")) {
      window.location.protocol = "https";
    } else {
      console.log("skip https redirect");
    }
  </script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: "ca-pub-3043297488880636",
  enable_page_level_ads: true
});
</script>

</head>
<body>

<header class="header">
  <h1 class="font-monospace">
    <a href="https://libsora.so/">/usr/lib/libsora.so</a>
  </h1>
  <nav>
    <h2 hidden>Navigation</h2>
    <ul class="nav-link-list">
      <li>
        <a href="https://libsora.so/about/"  title="about">
          <i class="fa fa-info"><span hidden>about</span></i>
        </a>
      </li>
      <li>
        <a href="https://libsora.so/projects/"  title="projects">
          <i class="fa fa-code"><span hidden>projects</span></i>
        </a>
      </li>
      <li>
        <a href="https://libsora.so/archives/"  title="archives">
          <i class="fa fa-archive"><span hidden>Archives</span></i>
        </a>
      </li>
      <li>
        <a href="https://libsora.so/tags/"  title="tags">
          <i class="fa fa-tags"><span hidden>Tags</span></i>
        </a>
      </li>
      <li>
        <a href="https://libsora.so/search/"  title="search">
          <i class="fa fa-search"><span hidden>Search</span></i>
        </a>
      </li>
    </ul>
  </nav>
</header>


<div class="container">
  <article class="basic-content article-content">
    <header>
      <hgroup class="entry-title">
        <a href="/posts/http-request-with-body-and-java-httpurlconnection/" rel="bookmark" title="Permalink to HTTP 요청에 body를 붙여서 보내면 어떤 일이 벌어질까? part 2">
          <h1>HTTP 요청에 body를 붙여서 보내면 어떤 일이 벌어질까? part 2</h1>
          
          <h2>Java HttpURLConnection의 경우</h2>
          
        </a>
      </hgroup>
    </header>

    <footer class="post-info">
      <abbr class="published" title='2019-02-09T00:00:00Z'>
        2019/02/09
      </abbr>
      
      <address class="vcard author">
        By <a href="//twitter.com/if1live">@if1live</a>
      </address>
      

      <ul class="list-of-tags tags-in-article">
        
        <li>
          <a href="/tags/http">#http</a>
        </li>
        
        <li>
          <a href="/tags/design">#design</a>
        </li>
        
      </ul>
    </footer>

    <section class="entry-content">
      <h2 id="삽질의-시작">삽질의 시작</h2>
<p>이전에 <a href="/posts//http-get-request-with-body-and-http-library">HTTP GET 요청에 body를 붙여서 보내면 어떤 일이 벌어질까?</a>를 썼다.
나중에 자바의 HttpURLConnection의 동작이 안드로이드 버전의 UnityWebRequest와 똑같다는 소리를 들었다.
유니티 개발자들이 HTTP 라이브러리 만들기 귀찮아서 플랫폼별로 내장된 HTTP 라이브러리를 쓴거 아닐까? 하는 망상을 했다.
그래서 HttpURLConnection로 HTTP 요청을 보낼때 body 붙이는 짓을 해봤다.</p>
<h2 id="테스트">테스트</h2>
<pre><code class="language-js">const express = require('express');

const app = express();
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

app.all('/', (req, res) =&gt; {
  res.json({ method: req.method, body: req.body });
});

const port = 3100;
app.listen(port, () =&gt; {
  console.log(`server listen - ${port}`);
});
</code></pre>
<p>아래의 <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods">HTTP request methods</a>는 표준에 정의되어 있다.</p>
<ul>
<li>GET</li>
<li>HEAD : asks for a response identical to that of a GET request, but without the response body.</li>
<li>POST</li>
<li>PUT</li>
<li>DELETE</li>
<li>CONNECT : establishes a tunnel to the server identified by the target resource.</li>
<li>OPTIONS</li>
<li>TRACE</li>
<li>PATCH</li>
</ul>
<p>HEAD와 CONNECT method는 다른 method와 동작이 달라서 보내지 않았다.
나머지 HTTP request method (GET, POST, PUT, DELETE, OPTIONS, TRACE, PATCH)만 테스트해봤다.
(curl로 HEAD, CONNECT 요청을 보내면 재밌는 결과를 볼수있다.)</p>
<h3 id="curl">curl</h3>
<pre><code class="language-bash">#!/bin/bash

function request_common {
    echo -e &quot;$1 =&gt; \c&quot;
    curl -X $1 http://127.0.0.1:3100/ \
        -H 'Content-Type: application/json' \
        -d '{&quot;foo&quot;: 1}' -s
    echo &quot;&quot;
}

request_common &quot;GET&quot;
# request_common &quot;HEAD&quot;
request_common &quot;POST&quot;
request_common &quot;PUT&quot;
request_common &quot;DELETE&quot;
# request_common &quot;CONNECT&quot;
request_common &quot;OPTIONS&quot;
request_common &quot;TRACE&quot;
request_common &quot;PATCH&quot;
</code></pre>
<pre><code class="language-txt">$ bash curl-demo.sh
GET =&gt; {&quot;method&quot;:&quot;GET&quot;,&quot;body&quot;:{&quot;foo&quot;:1}}
POST =&gt; {&quot;method&quot;:&quot;POST&quot;,&quot;body&quot;:{&quot;foo&quot;:1}}
PUT =&gt; {&quot;method&quot;:&quot;PUT&quot;,&quot;body&quot;:{&quot;foo&quot;:1}}
DELETE =&gt; {&quot;method&quot;:&quot;DELETE&quot;,&quot;body&quot;:{&quot;foo&quot;:1}}
OPTIONS =&gt; {&quot;method&quot;:&quot;OPTIONS&quot;,&quot;body&quot;:{&quot;foo&quot;:1}}
TRACE =&gt; {&quot;method&quot;:&quot;TRACE&quot;,&quot;body&quot;:{&quot;foo&quot;:1}}
PATCH =&gt; {&quot;method&quot;:&quot;PATCH&quot;,&quot;body&quot;:{&quot;foo&quot;:1}}
</code></pre>
<p>curl을 이용해서 요청을 보낸 경우 서버에서 요청에 붙은 body를 받을 수 있다.
curl로 요청을 보낸 경우 응답이 원하는대로 나온다.
서버는 잘 돌아간다는걸 확인할 수 있다.</p>
<h3 id="java-httpurlconnection">java HttpURLConnection</h3>
<pre><code class="language-java">import java.net.URL;
import java.net.HttpURLConnection;
import java.io.*;
import java.nio.charset.Charset;
import java.util.stream.Collectors;

public class Demo {
    public static void requestCommon(String method) throws Exception {
        String query = &quot;http://127.0.0.1:3100&quot;;
        String json = &quot;{\&quot;key\&quot;:1}&quot;;

        URL url = new URL(query);
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setConnectTimeout(5000);
        conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json; charset=UTF-8&quot;);
        conn.setDoOutput(true);
        conn.setDoInput(true);
        conn.setRequestMethod(method);

        OutputStream os = conn.getOutputStream();
        os.write(json.getBytes(&quot;UTF-8&quot;));
        os.close();

        // read the response
        Charset charset = Charset.defaultCharset();
        InputStream in = new BufferedInputStream(conn.getInputStream());
        String resp = &quot;&quot;;
        try (BufferedReader br = new BufferedReader(new InputStreamReader(in, charset))) {
           resp = br.lines().collect(Collectors.joining(System.lineSeparator()));
        }

        System.out.println(resp);

        in.close();
        conn.disconnect();
    }

    public static void main(String[] args) throws Exception {
        String[] methods = {
            &quot;GET&quot;,
            // &quot;HEAD&quot;,
            &quot;POST&quot;,
            &quot;PUT&quot;,
            &quot;DELETE&quot;,
            // &quot;CONNECT&quot;,
            &quot;OPTIONS&quot;,
            &quot;TRACE&quot;,
            &quot;PATCH&quot;,
        };
        for(String method : methods) {
            System.out.print(method + &quot; =&gt; &quot;);
            try {
                requestCommon(method);
            } catch(Exception e) {
                System.out.println(e.getMessage());
            }
        }
    }
}
</code></pre>
<pre><code class="language-txt">GET =&gt; {&quot;method&quot;:&quot;POST&quot;,&quot;body&quot;:{&quot;key&quot;:1}}
POST =&gt; {&quot;method&quot;:&quot;POST&quot;,&quot;body&quot;:{&quot;key&quot;:1}}
PUT =&gt; {&quot;method&quot;:&quot;PUT&quot;,&quot;body&quot;:{&quot;key&quot;:1}}
DELETE =&gt; {&quot;method&quot;:&quot;DELETE&quot;,&quot;body&quot;:{&quot;key&quot;:1}}
OPTIONS =&gt; {&quot;method&quot;:&quot;OPTIONS&quot;,&quot;body&quot;:{&quot;key&quot;:1}}
TRACE =&gt; HTTP method TRACE doesn't support output
PATCH =&gt; Invalid HTTP method: PATCH
</code></pre>
<p>자바의 HttpURLConnection를 사용한 경우의 출력이다.
body가 붙은 HTTP 요청을 보내니까 HTTP request method에 따라서 출력이 다르다.
비슷한거끼리 묶어서 보자.</p>
<table>
<thead>
<tr>
<th>HTTP request method</th>
<th>desc</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>POST로 보내진다.</td>
</tr>
<tr>
<td>POST, PUT, DELETE, OPTION</td>
<td>성공</td>
</tr>
<tr>
<td>TRACE</td>
<td>HTTP method TRACE doesn&rsquo;t support output</td>
</tr>
<tr>
<td>PATCH</td>
<td>Invalid HTTP method: PATCH</td>
</tr>
</tbody>
</table>
<h2 id="httpurlconnection">HttpURLConnection?</h2>
<h3 id="get이-post로-바뀐-이유">GET이 POST로 바뀐 이유</h3>
<p>동작이 이상해보일때는 소스를 뜯어보자.
스펙을 뒤지는 사람도 있던데 나는 영어를 못해서 그런거 힘들어.
검색하다보니 스택오버플로우에서 <a href="https://stackoverflow.com/a/27243207">좋은 답변</a>을 찾았다.</p>
<p>답변에서는 SUN자바의 HttpURLConnection 구현을 찍어주더라.
하지만 접속이 안되더라.
그래서 OpenJDK에서 비슷한 코드를 찾았다.</p>
<p><a href="http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/tip/src/share/classes/sun/net/www/protocol/http/HttpURLConnection.java#l1072">http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/tip/src/share/classes/sun/net/www/protocol/http/HttpURLConnection.java#l1072</a></p>
<pre><code class="language-java">if (method.equals(&quot;GET&quot;)) {
    method = &quot;POST&quot;; // Backward compatibility
}
if (!&quot;POST&quot;.equals(method) &amp;&amp; !&quot;PUT&quot;.equals(method) &amp;&amp;
    &quot;http&quot;.equals(url.getProtocol())) {
    throw new ProtocolException(&quot;HTTP method &quot; + method +
                                &quot; doesn't support output&quot;);
}
</code></pre>
<p>Backward compatibility라니!
하위 호환성 문제로 request body가 붙은 GET 요청은 POST로 바꿔친댄다.
그렇다면 하위 호환성이 발생한 이유에 대해 망상해보자.
멍청한 결정을 분석할때는 역사적 배경도 고려해야된다.
지금보면 멍청해보이는 결정도 그때는 그럴싸했을지 모른다.
자바 만든 사람들이 나보다 멍청할리 없잖아?</p>
<p><a href="https://docs.oracle.com/javase/8/docs/api/java/net/HttpURLConnection.html">HttpURLConnection</a>은 오래된 클래스이다.
문서를 보면 JDK 1.1 시절부터 있었다고한다.
JDK 1.1은 1997년 2월 19일에 나왔다고하더라.</p>
<p><a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a>은 Roy Fielding의 2000년 박사학위 논문에서 소개되었다고 하더라.</p>
<p>HTTP/1.0은 1996년에 나왔다.
RFC1945 <a href="https://tools.ietf.org/html/rfc1945">Hypertext Transfer Protocol &ndash; HTTP/1.0</a>의 공개일이 1996년 5월이더라.
HTTP/1.0에서 제대로된 HTTP request method는 GET, HEAD, POST 뿐이었다.
RFC에서 PUT, DELETE, LINK, UNLINK라는 HTTP method도 언급하지만 Additional Request Methods라는 해서 부록에 붙어있다.</p>
<p>HTTP/1.1은 1997년에 나왔다.
RFC2068 <a href="https://tools.ietf.org/html/rfc2068">Hypertext Transfer Protocol &ndash; HTTP/1.1</a>의 공개일은 1997년 1월이다.
HTTP request method는 OPTIONS, GET, HEAD, POST, PUT, DELETE, TRACE가 되었다. 지금이랑 크게 다르지 않다.</p>
<p>시간순으로 적당히 나열하자.</p>
<ol>
<li>1996년 5월: HTTP/1.0</li>
<li>1997년 1월: HTTP/1.1</li>
<li>1997년 2월: JDK 1.1</li>
<li>2000년 : REST</li>
</ol>
<p>HttpURLConnection 만들던 시절에는 REST라는 개념이 없었다.
JDK 1.1의 생일과 HTTP/1.1의 생일은 1달 밖에 차이나지 않는다.
개발 기간을 생각하면 HttpURLConnection은 HTTP/1.1이 아니라 HTTP/1.0을 보고 만들었을것이다.
HTTP/1.0에는 HEAD, GET, POST뿐이니 request body가 붙은 요청을 POST로 바꾸는게 멍청한 구현이 아니다.
HTTP/1.1이었다면 request body가 붙는 요청이 POST말고도 PUT, PATCH도 있으니까 멋대로 GET을 POST로 바꾸면 안된다.</p>
<p>HTTP 코드랑 구현체의 주석을 보니 초기에 만든 동작을 그대로 유지시켰나보다.</p>
<h3 id="http-method-trace-doesnt-support-output">HTTP method TRACE doesn&rsquo;t support output</h3>
<p>wikipedia의 <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">Hypertext Transfer Protocol</a>의 summary table을 보면 TRACE method은 body 안붙는게 표준이다.</p>
<p><img src="/posts/http-request-with-body-and-java-httpurlconnection/http-summary-table.png" alt="summary table"></p>
<h3 id="invalid-http-method-patch">Invalid HTTP method: PATCH</h3>
<p>HTTP request method중에서 PATCH는 특별하다. 스펙 문서부터 다르다.
PATCH는 RFC5789 <a href="https://tools.ietf.org/html/rfc5789">PATCH Method for HTTP</a>에 정의되어있다.
게다가 PATCH는 request body 규격도 정의되어있다.
RFC6902 <a href="https://tools.ietf.org/html/rfc6902">JavaScript Object Notation (JSON) Patch</a>를 보면 아래의 코드가 들어있다.</p>
<pre><code class="language-json">[
  { &quot;op&quot;: &quot;test&quot;, &quot;path&quot;: &quot;/a/b/c&quot;, &quot;value&quot;: &quot;foo&quot; },
  { &quot;op&quot;: &quot;remove&quot;, &quot;path&quot;: &quot;/a/b/c&quot; },
  { &quot;op&quot;: &quot;add&quot;, &quot;path&quot;: &quot;/a/b/c&quot;, &quot;value&quot;: [ &quot;foo&quot;, &quot;bar&quot; ] },
  { &quot;op&quot;: &quot;replace&quot;, &quot;path&quot;: &quot;/a/b/c&quot;, &quot;value&quot;: 42 },
  { &quot;op&quot;: &quot;move&quot;, &quot;from&quot;: &quot;/a/b/c&quot;, &quot;path&quot;: &quot;/a/b/d&quot; },
  { &quot;op&quot;: &quot;copy&quot;, &quot;from&quot;: &quot;/a/b/d&quot;, &quot;path&quot;: &quot;/a/b/e&quot; }
]
</code></pre>
<p>POST, PUT 같은건 request body 규격으로 바가지 안긁는다. 상세 구현은 알아서 적당히 하면 된다.
PATCH는 리소스 변경을 목적으로 나왔느니 조금 더 신경쓴 느낌이다.</p>
<p>HttpURLConnection에서 PATCH를 지원하지 않는걸보니 최신 스펙에 맞춰서 유지보수하는 클래스가 아닌가보다.
힙스터가 자바에서 HTTP 통신 사용할일 있으면 HttpURLConnection 쓰면 안되겠다.</p>
<h2 id="reference">reference</h2>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods">MDN HTTP request methods</a></li>
<li><a href="https://tools.ietf.org/html/rfc1945">Hypertext Transfer Protocol &ndash; HTTP/1.0</a></li>
<li><a href="https://tools.ietf.org/html/rfc7231">Hypertext Transfer Protocol &ndash; HTTP/1.1</a></li>
<li><a href="https://tools.ietf.org/html/rfc5789">PATCH Method for HTTP</a></li>
<li><a href="https://tools.ietf.org/html/rfc6902">JavaScript Object Notation (JSON) Patch</a></li>
<li><a href="/posts/http-request-with-body-and-java-httpurlconnection/RFC2616.pdf">Hypertext Transfer Protocol &ndash; HTTP 1.1, 한국전자통신연구소 번역</a></li>
</ul>

    </section>

    <ul class="articles-timeline">
      <li class="previous-article">
        
        <a href="https://libsora.so/posts/peoples-thoughts-are-similar/" title="Next: 사람 생각하는건 비슷하다">
          사람 생각하는건 비슷하다
          
          <br/><small>나만 틀린건 아니었나보다</small>
          
        </a>
        
      </li>

      <li class="next-article">
        
        <a href="https://libsora.so/posts/use-absolute-path-in-typescript/" title="Previous: 타입스크립트에서 절대경로 쓰기">
          타입스크립트에서 절대경로 쓰기
          
          <br/><small>typescript, absolute path, webpack, ts-node, jest</small>
          
        </a>
        
      </li>
    </ul>

    <section class="entry-content">
      <section class="disqus-section">
<h1 hidden>Comment</h1>
<div id="disqus_thread"></div>
<script type="text/javascript">
  var host = "libsora.so";
  if (host == window.location.host) {
    var disqus_shortname = 'libsora';
    var disqus_identifier = 'http://libsora.so\/posts\/http-request-with-body-and-java-httpurlconnection\/';

    (function() {
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  } else {
    console.log("skip disqus");
  }
</script>
<noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>

    </section>
  </article>
</div>

<footer class="footer">
  <ul class="nav-link-list">
    
    
    
    <li>
      
      <a href="//twitter.com/if1live" title="Twitter"><i class="fa fa-twitter"> </i></a>
    </li>
    
    
    
    <li>
      
      <a href="//github.com/if1live" title="GitHub"><i class="fa fa-github"> </i></a>
    </li>
    
    
    
    <li>
      
      <a href="//bitbucket.org/if1live" title="BitBucket"><i class="fa fa-bitbucket"> </i></a>
    </li>
    

    <li>
      
      <a href="https://libsora.so/index.xml"><i class="fa fa-rss"> </i></a>
    </li>

    
  </ul>

  <p>
    <a href="//gohugo.io/" title="Hugo">Hugo</a> |
    
    <a href="//twitter.com/if1live/" title="@if1live">@if1live</a>
    
  </p>
</footer>

<script src="/js/common.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/prism.min.js"
  integrity="sha512-9+422Bs3A87UkWfp+qV80Nfv9arhbCXKY1rxrF2seorI36mIIstMiuBfyKLF1yH1nnzQkEWq2xrzT4XU3Z+vrA=="
  crossorigin="anonymous"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/plugins/line-numbers/prism-line-numbers.min.js"
  integrity="sha512-1oLZvExT5RaW4q2GgvRPf+XzVVGmsKirfZBRN7aifdOpvZ1L9idEncfMFlfHiQNGBA+Sev+alscSAT/xQ0rwXA=="
  crossorigin="anonymous"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-clike.min.js"
  integrity="sha512-/WJ9ZNER39LEXW4XzFoMR6ct++/HT++A71MDW2gBbUJExj8hFRtde5Q5QzcHyBMxU97VeH1wEHGBRtNuGJpV4w=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-c.min.js"
  integrity="sha512-TO7UeOg1N67oP7UU2OzrOm0oZrTz2TXGNRtkf/x+d9Pt5O8cb5jeSRcryiXqW/Nd25VEc8Qqtu8Dx1EVV7AJLQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-cpp.min.js"
  integrity="sha512-dzF2RO45FHCMPdWDQ3I7Cn9xPvCM8x8T4ODz+kSPQl5CAuIMy6Ekb2i2DAjLEpG/V/DL9f/O7+9E/HZQQx89IA=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-typescript.min.js"
  integrity="sha512-5KnWNKu6jz8OE4nIBndz3PZ4O3RGqcPNcsyEFZkx3F5N8liSwc3bCe4qPOa/a3+e4CxVl0izHMXeZ0Z4yk7LTA=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-python.min.js"
  integrity="sha512-EXseTM1JV8e3AonU5PfOUmzbPkUTRm4c4hVxv206gVeWZE/FwzSQBNWrUBaHsN3Idq9k76BEjUlXpluX1UFx6Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-javascript.min.js"
  integrity="sha512-UN3RxBb1KfsWQUMNl19SU/JPer3v8jTBpfGyQaBEuaVjP5q0Gz9ihj8MiHEUZYnc1krYRm5imVebjq1egsSaKA=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-java.min.js"
  integrity="sha512-p2vAaPEsPvlIESCpoEI5IyzZowfdVZ2O39PsrOrkuTQl+AjD57T4L/Wxv5S8WCToLou0twQZaWO+tt660Rqb6Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-csharp.min.js"
  integrity="sha512-qvSIQfI/qEeMC1E1LMSPCsDl8vFzl0rkBfF6dDcnMJxQT+8M2WjSyDGqHQzZa+RChv3jkdKnZAo99BcAbGsnQg=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-bash.min.js"
  integrity="sha512-CILPDr/8BlkkElCeI+f2yMu0fzgwWqpQ0Cdr0busFfySJJ4SoCRivbT6+Z+SWPkjWwBil9NO0tHd6NSfpwiQaA=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-ruby.min.js"
  integrity="sha512-Wgi0cnFpl5EY8xLe1RO+uTsot86wzAbW/BIoqZopPU+8YW79VDqQE9qTe1R+1uhxLsPBHE+nYwACS+eTsE5GtQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-go.min.js"
  integrity="sha512-hVtwzUDz/n7RqQmiQ7xYAJCTTJe5C52Ung+4Kpz2fPRq7nq2h5gHHQe2HRy7f1Tj3OUVgTO5WRx7XuwT624C9Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-less.min.js"
  integrity="sha512-REVnwsprLWmQbtt0WjkS59nMvtKE0olIjUx+N/k3Gqa5WhmrZ7o0ahGhKYnIK6W2+ITg4cQ2UqZkka4RaZSM9Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-scss.min.js"
  integrity="sha512-rAb9BrnkhMpxN7NoOM7WwPa3phfCMMUZw568Tyzlj9frNsdUUeltfCTATD6ccnVLtnERR+ZXS85Ybs7wo9IiTQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-css.min.js"
  integrity="sha512-zDjwO/e5eVa5WfYra8CE827RFyA/nqhp8y4da+geEpAqpCnmfAHopCNobQ9sJeLBMQY0OLB+hT+k6bbb0FhdYQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-json.min.js"
  integrity="sha512-IC7rV8RslChgByOdUFC6ePqOGn+OwJhnKC3S5AezM8DAiOdGhJMwgsIvBChsa2yuxxoPbH2+W/kjNUM1cc+jUQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-yaml.min.js"
  integrity="sha512-j9sRnEoasdNn9OSwsCxjrQi1H55NqBFDJ+oe7me3sIfvDLeTyzvnZXf0eJqL5CvX6rswU2Sld9PnTVQ0Xy2CFQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-batch.min.js"
  integrity="sha512-YzSVmlznJS4QEi5/tSS9iZ/tVFGdQSKO/F2jsofNH+5PifywJfsOtOZaia+URhumCMdXTTG2UZQ4vtBHWids+Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-lisp.min.js"
  integrity="sha512-3c6jwEnUKsrvucb8b9xdDJw13zOdbeP83PvlSKeoTCCWGacG03MUWHCcBev2NKHA+w8IAWZsGXBcNMaIH/VWYA=="
  crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.8.3/mermaid.min.js"
  integrity="sha512-+TNmhaRJf3jyYHTpzEq/5I6b+aGyhzWb21mGdHAjxSGSYwxN9Grug3Y3B9qVxWfKKY8MscE/6mr9walWvFLFvQ=="
  crossorigin="anonymous"></script>

<script>
  mermaid.initialize({ startOnLoad: true });

  (function () {
    const elems = document.querySelectorAll('code.language-mermaid');
    for (let i = 0; i < elems.length; i++) {
      const id = `mermaid-${i}`;
      const elem = elems[i];
      const source = elem.innerText;
      const cb = (svg) => {
        const div = document.createElement('div');
        div.innerHTML = svg;
        elem.parentElement.replaceWith(div);
      };
      mermaid.render(id, source, cb);
    }
  })();
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js"
  integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg=="
  crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js"
  integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg=="
  crossorigin="anonymous"></script>

<script>
  renderMathInElement(document.body,
    {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false },
      ]
    }
  );

  var inlineMathArray = document.querySelectorAll("script[type='math/tex']");
  for (var i = 0; i < inlineMathArray.length; i++) {
    var inlineMath = inlineMathArray[i];
    var tex = inlineMath.innerText || inlineMath.textContent;
    var replaced = document.createElement("span");
    replaced.innerHTML = katex.renderToString(tex, { displayMode: false });
    inlineMath.parentNode.replaceChild(replaced, inlineMath);
  }

  var displayMathArray = document.querySelectorAll("script[type='math/tex; mode=display']");
  for (var i = 0; i < displayMathArray.length; i++) {
    var displayMath = displayMathArray[i];
    var tex = displayMath.innerHTML;
    var replaced = document.createElement("span");
    replaced.innerHTML = katex.renderToString(tex.replace(/%.*/g, ''), { displayMode: true });
    displayMath.parentNode.replaceChild(replaced, displayMath);
  }
</script>


<script>
  var host = "libsora.so";
  if (host == window.location.host) {
    window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
    ga('create','UA-37862172-2','auto');ga('send','pageview')
  } else {
    console.log("skip google analytics");
  }
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>


</body>
</html>

