<!doctype html>
<html class="no-js" lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Hugo 0.78.1" />

  <title> Ext2 File System &middot; /usr/lib/libsora.so </title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="naver-site-verification" content="2ddc1a56777489f4a64a4f6a59822f8b1c1ea502"/>
  <meta name="google-site-verification" content="VsvNNnJZUV-iLEYKNju16p-HtDqZeqL15H-VVy-HwpA" />

  <meta name="gc:client-id" content="785d47c81cbc2fd42b65">
  <meta name="gc:client-secret" content="5e5d558f0b16fae154aa47fc9d94f7c09e540ec7">

  
  <meta name="author" content="if1live" />
  

  
  <meta name="description" content="Ext2 File System" />
  

  
  <meta name="keywords" content="linux, system programming, filesystem, ext2" />
  

  
  
<meta name="twitter:card" content="summary">
<meta name="og:url" content="https://libsora.so/posts/system-programming-ext2-file-system/">

<meta name="twitter:site" content="@if1live">


<meta name="twitter:title" content="Ext2 File System">
<meta name="twitter:description" content="시스템 프로그래밍 시험 공부하면서 정리한 내용이다. 내용 갱신은 없을 예정이다.
Abstract View of VFS Objects  In kernel memory  super block dentry inode file VFS, 어떤 FS를 쓰더라도 동일 File System 문서 참고   On disk  Ext2 Filesystem FS에 따라서 구조가 ">

<meta name="twitter:image:src" content="https://www.gravatar.com/avatar/fb9672e7e0d256f39369595381d1ea07">



  

  
  
  <link rel="stylesheet" href="https://libsora.so/css/style-gen.css?2">

  
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

  
  <link href="https://libsora.so/index.xml" rel="alternate" type="application/rss+xml" title="/usr/lib/libsora.so" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/themes/prism.min.css"
  integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ=="
  crossorigin="anonymous" />
<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/plugins/line-numbers/prism-line-numbers.min.css"
  integrity="sha512-cbQXwDFK7lj2Fqfkuxbo5iD1dSbLlJGXGpfTDqbggqjHJeyzx88I3rfwjS38WJag/ihH7lzuGlGHpDBymLirZQ=="
  crossorigin="anonymous" />

  
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css"
  integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw=="
  crossorigin="anonymous" />


  
  <script type="text/javascript">
    var host = "libsora.so";
    if ((host == window.location.host) && (window.location.protocol != "https:")) {
      window.location.protocol = "https";
    } else {
      console.log("skip https redirect");
    }
  </script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: "ca-pub-3043297488880636",
  enable_page_level_ads: true
});
</script>

</head>
<body>

<header class="header">
  <h1 class="font-monospace">
    <a href="https://libsora.so/">/usr/lib/libsora.so</a>
  </h1>
  <nav>
    <h2 hidden>Navigation</h2>
    <ul class="nav-link-list">
      <li>
        <a href="https://libsora.so/about/"  title="about">
          <i class="fa fa-info"><span hidden>about</span></i>
        </a>
      </li>
      <li>
        <a href="https://libsora.so/projects/"  title="projects">
          <i class="fa fa-code"><span hidden>projects</span></i>
        </a>
      </li>
      <li>
        <a href="https://libsora.so/archives/"  title="archives">
          <i class="fa fa-archive"><span hidden>Archives</span></i>
        </a>
      </li>
      <li>
        <a href="https://libsora.so/tags/"  title="tags">
          <i class="fa fa-tags"><span hidden>Tags</span></i>
        </a>
      </li>
      <li>
        <a href="https://libsora.so/search/"  title="search">
          <i class="fa fa-search"><span hidden>Search</span></i>
        </a>
      </li>
    </ul>
  </nav>
</header>


<div class="container">
  <article class="basic-content article-content">
    <header>
      <hgroup class="entry-title">
        <a href="/posts/system-programming-ext2-file-system/" rel="bookmark" title="Permalink to Ext2 File System">
          <h1>Ext2 File System</h1>
          
          <h2>2014년 2학기 시스템 프로그래밍 시험 공부</h2>
          
        </a>
      </hgroup>
    </header>

    <footer class="post-info">
      <abbr class="published" title='2014-12-03T00:00:00Z'>
        2014/12/03
      </abbr>
      
      <address class="vcard author">
        By <a href="//twitter.com/if1live">@if1live</a>
      </address>
      

      <ul class="list-of-tags tags-in-article">
        
        <li>
          <a href="/tags/linux">#linux</a>
        </li>
        
        <li>
          <a href="/tags/system-programming">#system programming</a>
        </li>
        
        <li>
          <a href="/tags/filesystem">#filesystem</a>
        </li>
        
        <li>
          <a href="/tags/ext2">#ext2</a>
        </li>
        
      </ul>
    </footer>

    <section class="entry-content">
      <p>시스템 프로그래밍 시험 공부하면서 정리한 내용이다. 내용 갱신은 없을 예정이다.</p>
<h2 id="abstract-view-of-vfs-objects">Abstract View of VFS Objects</h2>
<ul>
<li>In kernel memory
<ul>
<li>super block</li>
<li>dentry</li>
<li>inode</li>
<li>file</li>
<li>VFS, 어떤 FS를 쓰더라도 동일</li>
<li>File System 문서 참고</li>
</ul>
</li>
<li>On disk
<ul>
<li>Ext2 Filesystem</li>
<li>FS에 따라서 구조가 다르다</li>
</ul>
</li>
</ul>
<h2 id="the-ext2-filesystem">The Ext2 Filesystem</h2>
<h3 id="역사">역사</h3>
<ul>
<li>최초의 리눅스는 Minix 파일시스템을 사용함</li>
<li>Extended Filesystem 등장. 이전보다 개선되었지만 불만족스러운 성능</li>
<li>1994년 Second Extended Filesystem (Ext2)</li>
<li>현재 Ext3, Ext4 존재</li>
</ul>
<h3 id="특징">특징</h3>
<ul>
<li>1024~4096 byte까지 설정 가능한 블럭 크기</li>
<li>inode 의 갯수 설정가능</li>
<li>디스크 블럭을 그룹으로 나눈다. 그룹에는 데이터 블럭과 inode가 저장된다</li>
<li>일반 파일용 데이터 블럭을 파일을 사용하기전에 미리 할당</li>
<li>빠른 심볼릭 링크 지원</li>
<li>시스템 크래시의 충격을 최소화하는 파일 갱신 구현</li>
<li>부팅할때 파일시스템 상태의 무결성 자동으로 확인</li>
<li>변경 불가능한 파일(immutable), 추가만 가능한 파일 지원(append-only)</li>
</ul>
<h2 id="ext2-disk-data-structures">Ext2 Disk Data Structures</h2>
<ul>
<li>포맷
<ul>
<li>파일 시스템 구조를 디스크에 적절히 기록하는 과정</li>
<li>mke2fs - create an ext2/ext3/ext4 filesystem</li>
</ul>
</li>
<li>Boot Block
<ul>
<li>Ext2 파티션의 첫번째 블럭</li>
<li>부트 섹터용으로 항상 예약</li>
</ul>
</li>
<li>Block Group 0&hellip;N
<ul>
<li>boot block을 제외한 나머지 파티션은 block group으로 나눈다</li>
<li>모든 블럭 그룹은 같은 크기이며 디스크에 연속적으로 저장됨</li>
<li>커널은 하나의 파일이 하나의 블럭 그룹에 속하도록 시도해서 파일 파편화를 최소화</li>
</ul>
</li>
<li>Super Block
<ul>
<li>크기 : 1 block</li>
</ul>
</li>
<li>Group Descriptors
<ul>
<li>크기 : Ng blocks</li>
</ul>
</li>
<li>Data block Bitmap
<ul>
<li>크기 : 1 block</li>
<li>특정 데이터 블럭이 사용중인 추적</li>
<li>데이터 블럭이 사용중이면 1, 아니면 0</li>
</ul>
</li>
<li>Inode Bitmap
<ul>
<li>크기 : 1 block</li>
<li>특정 inode가 사용중인지 추적</li>
</ul>
</li>
<li>Inode Table
<ul>
<li>크기 : Ni blocks</li>
</ul>
</li>
<li>Data Blocks
<ul>
<li>크기 : Nd blocks</li>
</ul>
</li>
</ul>
<h3 id="block-group-disk-data-structure">&lsquo;Block Group&rsquo; Disk Data Structure</h3>
<ul>
<li>superblock과 group descriptor는 모든 block group에 중복해서 저장한다. 하지만 커널은 **block group 0 (main block group)**만 사용한다.
<ul>
<li>block group 1~N 에 저장된 중복된 내용은 복구용으로 사용</li>
</ul>
</li>
<li>block group의 갯수는 파티션과 블럭 크기에 영향받음
<ul>
<li>제약사항 : 블럭 bitmap은 단일 블럭에 저장되어야한다.</li>
<li>예 : 8GB 파티션 + 4KB 블럭. 4KB 블럭 = 32K bit. 32K bitmap * 4KB 블럭 = 128MB 블럭 그룹. 8G / 128MB = 64개의 블럭 그룹이 필요</li>
</ul>
</li>
</ul>
<h3 id="superblock-disk-data-structure">superblock Disk Data Structure</h3>
<ul>
<li>superblock은 <code>ext2_super_block</code> 구조체에 저장된다.</li>
<li>파일시스템/파티션마다 1개</li>
<li>superblock의 크기 == 1개 블럭</li>
<li>include/linux/ext2_fs.h</li>
</ul>
<h3 id="group-descriptor-disk-data-structure">Group Descriptor Disk Data Structure</h3>
<ul>
<li>각각의 블럭 그룹은 블럭 디스크립터를 가진다.</li>
<li>include/linux/ext2_fs.h : <code>ext2_group_desc</code></li>
<li>각각의 블럭 그룹마다 파일시스템 안에서 Ng개의 연속된 블럭을 차지하는 형태로 저장된다.</li>
</ul>
<h3 id="inode-table-disk-data-structure">inode Table Disk Data Structure</h3>
<ul>
<li>연속된 블럭을 차지한다. Ni개의 블럭을 차지.</li>
<li>include/linux/ext2_fs.h : <code>ext2_inode</code></li>
<li>모든 inode는 동일한 크기. 128 byte
<ul>
<li>4KB = 4096 byte = inode 128 byte * 32개</li>
<li>4KB 블럭당 32개의 inode</li>
</ul>
</li>
</ul>
<h3 id="inode-file-types">inode File Types</h3>
<ul>
<li>일반 파일
<ul>
<li>데이터가 시작되려면 데이터 블럭이 필요</li>
<li>file type = 1</li>
</ul>
</li>
<li>장치 파일, 파이프, 소켓
<ul>
<li>데이터 블럭이 필요없다.</li>
<li>inode안에 필요한 모든 정보가 저장된다.</li>
<li>CHRDEV, (character device) = file type 3</li>
<li>BLKDEV, (block device) = file type 4</li>
<li>파이프 = file type 5</li>
<li>소켓 = file type 6</li>
</ul>
</li>
<li>심볼릭 링크
<ul>
<li>60 (15 * 4) 글자까지는 데이터 블럭 포인터 배열에 저장(<code>ext2_inode</code>안의 <code>i_block</code>필드)
<ul>
<li>빠른 심볼릭 링크</li>
</ul>
</li>
<li>60자 초과시 데이터 블럭 필요</li>
<li>file type = 7</li>
</ul>
</li>
<li>디렉토리 파일
<ul>
<li>해당 파일의 데이터 블럭에 파일이름과 대응되는 inode번호를 저장하는 특별한 종류의 파일</li>
<li><code>ext2_dir_entry_2</code></li>
<li>각각의 디렉토리 구조체는 inode번호, 디렉토리 엔트리 크기, 이름 길이, 파일 타입, 파일 이름을 포함</li>
<li>file type = 2</li>
</ul>
</li>
</ul>
<h2 id="ext2-memory-data-structures">Ext2 Memory Data Structures</h2>
<ul>
<li>효율성
<ul>
<li>대부분의 디스크 자료구조에 저장된 모든 정보는 마운트 할때 램으로 복사한다.</li>
</ul>
</li>
<li>얼마나 데이터 구조가 자주 바뀌는지 고려
<ul>
<li>새로운 파일이 생성될때</li>
<li>파일이 더 많은 디스크 블럭을 필요로 할때</li>
<li>접근 시간이 갱신되어야 할 떄</li>
</ul>
</li>
<li>페이지 캐시 사용
<ul>
<li>일부 메모리상의 자료 구조는 디스크상의 자료 구조와 다르다. (저장 지연)</li>
</ul>
</li>
</ul>
<h3 id="ext2-자료구조의-vfs-이미지">Ext2 자료구조의 VFS 이미지</h3>
<table>
<thead>
<tr>
<th>Type</th>
<th>디스크 구조체</th>
<th>메모리 구조체</th>
<th>캐싱 모드</th>
</tr>
</thead>
<tbody>
<tr>
<td>superblock</td>
<td>ext2_super_block</td>
<td>ext2_sb_info</td>
<td>항상 캐시</td>
</tr>
<tr>
<td>group descriptor</td>
<td>ext2_group_desc</td>
<td>ext2_group_desc</td>
<td>항상 캐시</td>
</tr>
<tr>
<td>block bitmap</td>
<td>블럭안의 비트배열</td>
<td>버퍼안의 비트배열</td>
<td>동적</td>
</tr>
<tr>
<td>inode bitmap</td>
<td>블럭안의 비트배열</td>
<td>버퍼안의 비트배열</td>
<td>동적</td>
</tr>
<tr>
<td>inode</td>
<td>ext2_inode</td>
<td>ext2_inode_info</td>
<td>동적</td>
</tr>
<tr>
<td>data block</td>
<td>바이트 배열</td>
<td>VFS 버퍼</td>
<td>동적</td>
</tr>
<tr>
<td>free inode</td>
<td>ext2_inode</td>
<td>없음</td>
<td>안함</td>
</tr>
<tr>
<td>free block</td>
<td>바이트 배열</td>
<td>없음</td>
<td>안함</td>
</tr>
</tbody>
</table>
<h3 id="ext2-superblock-object">Ext2 superblock Object</h3>
<ul>
<li>include/linux/ext2_fs_sb.h : <code>ext2_sb_info</code>
<ul>
<li>ext2 파일시스템이 마운트되면 VFS 슈퍼 블럭의 <code>s_fs_info</code>는 <code>ext2_sb_info</code>를 가리킨다.</li>
<li>ext2 파일시스템만 특화 정보가 저장되어 있다.</li>
<li>이 메모리 자료 구조는 Ext2 superblock 디스크 자료 구조에서 가져온 대부분의 정보를 포함</li>
<li>마운트 상태, 옵션과 같은 정보 포함</li>
</ul>
</li>
</ul>
<h3 id="ext2-inode-object">Ext2 inode object</h3>
<ul>
<li>VFS가 ext2 디스크 inode에 접근하면 inode 디스크립터인 <code>ext2_inode_info</code>가 생성된다</li>
<li>fs/ext2/ext2.h : <code>ext2_inode_info</code>
<ul>
<li><strong>VFS inode 객체 (struct inode)</strong></li>
<li>VFS inode에는 없지만 디스크 inode에는 있는 대부분의 내용이 포함됨</li>
</ul>
</li>
</ul>
<h2 id="ext2-operations">Ext2 Operations</h2>
<ul>
<li>VFS와 특정 파일 시스템이 연관됨
<ul>
<li><code>ext2_...</code> + <code>generic+...</code> =&gt; 함수 포인터로 이루어진 구조체에 연결</li>
</ul>
</li>
<li>file_operations : 파일의 내용 다루는 함수</li>
<li>inode_operations : file 객체용 함수</li>
<li>super_operations  : super block과 상호작용하는 함수</li>
<li>address_space_operations : 일반화된 주소 공간용 함수
<ul>
<li>파일시스템과 블럭 에이어가 여기에서 연결됨</li>
<li>페이지 캐시</li>
</ul>
</li>
</ul>
<h2 id="managing-ext2-disk-space">Managing Ext2 Disk Space</h2>
<ul>
<li>디스크 공간 관리
<ul>
<li><strong>inode</strong>와 <strong>data block</strong>의 할당/해제</li>
</ul>
</li>
<li>디스크 공간 관리의 목표
<ol>
<li>파일 파편화 최소화
<ul>
<li>파일 파편화는 파일 연산의 평균 시간을 늘린다</li>
<li>메모리 할당과 비슷한 문제</li>
</ul>
</li>
<li>시간 효율
<ul>
<li>파일 오프셋과 논리 블럭 번호의 변환이 커널에서 빨리 처리되어야 한다.</li>
<li>디스크 자료 구조에 접근하는 것을 제한</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="inode-할당">inode 할당</h3>
<ul>
<li><code>ext2_new_inode()</code></li>
<li>새로운 node를 포함하기에 적절한 block group를 선택해서 ext2 디스크 inode 생성</li>
<li>블럭 그룹 안의 일반파일과 디렉토리의 갯수를 균형 맞춤
<ul>
<li>관계없는 디렉토리를 다른 그룹에 퍼뜨리기</li>
<li>부모 디렉토리가 같은 파일은 같은 그룹에 넣기</li>
</ul>
</li>
<li>inode 비트맵 갱신, inode 카운터 감소, inode를 superblock의 dirty list에 넣기</li>
</ul>
<h3 id="inode-해제">inode 해제</h3>
<ul>
<li><code>ext2_free_inode()</code></li>
<li>inode 객체가 가리키는 디스크 inode 삭제</li>
<li>이런 경우에도 호출된다
<ul>
<li>inode가 inode 해시 테이블에서 지워진 이후</li>
<li>마지막 하드 링크가 삭제된 이후</li>
<li>파일이 0으로 truncated된 이후</li>
</ul>
</li>
<li>inode 비트맵 갱신, inode 카운터 증가, inode를 superblock의 dirty list에 추가</li>
</ul>
<h3 id="데이터-블럭-어드레싱">데이터 블럭 어드레싱</h3>
<ul>
<li>비어있지 않은 일반 파일은 여러개의 데이터 블럭으로 구성된다
<ul>
<li>블럭은 파일에서의 상대 위치(file block number)나 디스크 파티션에서의 위치(logical block number)로 조회 가능</li>
</ul>
</li>
<li>파일 안에서의 오프셋을 논리 블럭 번호로 유도하는 과정은 2단계를 거친다
<ol>
<li>file block number를 오프셋에서 유도
<ul>
<li>file block number = (int)(offset / 블럭 크기). 간단하다</li>
</ul>
</li>
<li>file block number를 logical block number로 변환
<ul>
<li>ext2 파일의 데이터 블럭이 디스크에서 인접하지 않을수도 있기 때문에 쉽진 않다</li>
<li>파일 시스템은 각각의 file block number와 대등되는 디스크상의 logical block number를 저장할수 있는 방법을 제공해야 한다.</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="데이터-블럭-어드세링-상세">데이터 블럭 어드세링 상세</h3>
<ul>
<li>inode안에는 크기 15의 블럭 포인터 배열이 있다.</li>
<li>12개 항목 : 실제 데이터 블럭을 가리킨다.
<ul>
<li>예 : 8KB = 4KB 블럭 * 2, 실제 블럭 가리키는 포인터 2개로 끝</li>
</ul>
</li>
<li>13번째 항목 : 1-레벨 참조용으로 쓴다. 데이터 블럭 포인터가 있는 디스크 블럭(index block)을 가리킨다
<ul>
<li>1024 entry(4KB 블럭 / 4byte) * 4KB 블럭 = 4MB 지원</li>
</ul>
</li>
<li>14번째 항목 : 2-레벨 참조용으로 사용
<ul>
<li>1024 entry(4KB 블럭 / 4byte) * 1024 * 4KB 블럭 = 4GB 지원</li>
</ul>
</li>
<li>15번째 항목 : 3-레벨 참조용으로 사용</li>
<li>Index based file access</li>
</ul>
<h3 id="데이터-블럭-할당">데이터 블럭 할당</h3>
<ul>
<li>fs/ext2/inode.c : <code>ext2_get_block()</code></li>
<li>파편화를 최소화하려고 ext2는 파일이 마지막으로 할당한 블럭 가까이에 있는 새로운 블럭을 주려고 한다.
<ul>
<li>실패시 파일의 inode가 속해있는 블럭 그룹에서 새로운 블럭을 찾는다.</li>
<li>최후의 수단으로 다른 블럭 그룹의 비어있는 블럭을 사용</li>
</ul>
</li>
<li>블럭 미리 할당 수행</li>
<li>다양한 bookkeeping 기록 갱신</li>
</ul>
<h3 id="데이터-블럭-해제">데이터 블럭 해제</h3>
<ul>
<li>fs/ext2/inode.c : <code>ext2_truncate()</code></li>
<li>파일을 삭제하려면 inode가 필요</li>
<li>struct <code>ext2_inode</code> 안의 <code>i_block</code> 추적해서 모든 데이터 블럭을 해제</li>
<li>다양한 bookkeeping 기록 갱신</li>
</ul>

    </section>

    <ul class="articles-timeline">
      <li class="previous-article">
        
        <a href="https://libsora.so/posts/system-programming-memory-management/" title="Next: Memory Management">
          Memory Management
          
          <br/><small>2014년 2학기 시스템 프로그래밍 시험 공부</small>
          
        </a>
        
      </li>

      <li class="next-article">
        
        <a href="https://libsora.so/posts/i-hate-unsigned/" title="Previous: 나는 unsigned가 싫어요">
          나는 unsigned가 싫어요
          
          <br/><small>Youtube 강남스타일 MV 조회수가 32bit signed integer를 넘어간 시점에 다시 보는 unsigned의 가치</small>
          
        </a>
        
      </li>
    </ul>

    <section class="entry-content">
      <section class="disqus-section">
<h1 hidden>Comment</h1>
<div id="disqus_thread"></div>
<script type="text/javascript">
  var host = "libsora.so";
  if (host == window.location.host) {
    var disqus_shortname = 'libsora';
    var disqus_identifier = 'http://libsora.so\/posts\/system-programming-ext2-file-system\/';

    (function() {
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  } else {
    console.log("skip disqus");
  }
</script>
<noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>

    </section>
  </article>
</div>

<footer class="footer">
  <ul class="nav-link-list">
    
    
    
    <li>
      
      <a href="//twitter.com/if1live" title="Twitter"><i class="fa fa-twitter"> </i></a>
    </li>
    
    
    
    <li>
      
      <a href="//github.com/if1live" title="GitHub"><i class="fa fa-github"> </i></a>
    </li>
    
    
    
    <li>
      
      <a href="//bitbucket.org/if1live" title="BitBucket"><i class="fa fa-bitbucket"> </i></a>
    </li>
    

    <li>
      
      <a href="https://libsora.so/index.xml"><i class="fa fa-rss"> </i></a>
    </li>

    
  </ul>

  <p>
    <a href="//gohugo.io/" title="Hugo">Hugo</a> |
    
    <a href="//twitter.com/if1live/" title="@if1live">@if1live</a>
    
  </p>
</footer>

<script src="/js/common.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/prism.min.js"
  integrity="sha512-9+422Bs3A87UkWfp+qV80Nfv9arhbCXKY1rxrF2seorI36mIIstMiuBfyKLF1yH1nnzQkEWq2xrzT4XU3Z+vrA=="
  crossorigin="anonymous"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/plugins/line-numbers/prism-line-numbers.min.js"
  integrity="sha512-1oLZvExT5RaW4q2GgvRPf+XzVVGmsKirfZBRN7aifdOpvZ1L9idEncfMFlfHiQNGBA+Sev+alscSAT/xQ0rwXA=="
  crossorigin="anonymous"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-clike.min.js"
  integrity="sha512-/WJ9ZNER39LEXW4XzFoMR6ct++/HT++A71MDW2gBbUJExj8hFRtde5Q5QzcHyBMxU97VeH1wEHGBRtNuGJpV4w=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-c.min.js"
  integrity="sha512-TO7UeOg1N67oP7UU2OzrOm0oZrTz2TXGNRtkf/x+d9Pt5O8cb5jeSRcryiXqW/Nd25VEc8Qqtu8Dx1EVV7AJLQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-cpp.min.js"
  integrity="sha512-dzF2RO45FHCMPdWDQ3I7Cn9xPvCM8x8T4ODz+kSPQl5CAuIMy6Ekb2i2DAjLEpG/V/DL9f/O7+9E/HZQQx89IA=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-typescript.min.js"
  integrity="sha512-5KnWNKu6jz8OE4nIBndz3PZ4O3RGqcPNcsyEFZkx3F5N8liSwc3bCe4qPOa/a3+e4CxVl0izHMXeZ0Z4yk7LTA=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-python.min.js"
  integrity="sha512-EXseTM1JV8e3AonU5PfOUmzbPkUTRm4c4hVxv206gVeWZE/FwzSQBNWrUBaHsN3Idq9k76BEjUlXpluX1UFx6Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-javascript.min.js"
  integrity="sha512-UN3RxBb1KfsWQUMNl19SU/JPer3v8jTBpfGyQaBEuaVjP5q0Gz9ihj8MiHEUZYnc1krYRm5imVebjq1egsSaKA=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-java.min.js"
  integrity="sha512-p2vAaPEsPvlIESCpoEI5IyzZowfdVZ2O39PsrOrkuTQl+AjD57T4L/Wxv5S8WCToLou0twQZaWO+tt660Rqb6Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-csharp.min.js"
  integrity="sha512-qvSIQfI/qEeMC1E1LMSPCsDl8vFzl0rkBfF6dDcnMJxQT+8M2WjSyDGqHQzZa+RChv3jkdKnZAo99BcAbGsnQg=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-bash.min.js"
  integrity="sha512-CILPDr/8BlkkElCeI+f2yMu0fzgwWqpQ0Cdr0busFfySJJ4SoCRivbT6+Z+SWPkjWwBil9NO0tHd6NSfpwiQaA=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-ruby.min.js"
  integrity="sha512-Wgi0cnFpl5EY8xLe1RO+uTsot86wzAbW/BIoqZopPU+8YW79VDqQE9qTe1R+1uhxLsPBHE+nYwACS+eTsE5GtQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-go.min.js"
  integrity="sha512-hVtwzUDz/n7RqQmiQ7xYAJCTTJe5C52Ung+4Kpz2fPRq7nq2h5gHHQe2HRy7f1Tj3OUVgTO5WRx7XuwT624C9Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-less.min.js"
  integrity="sha512-REVnwsprLWmQbtt0WjkS59nMvtKE0olIjUx+N/k3Gqa5WhmrZ7o0ahGhKYnIK6W2+ITg4cQ2UqZkka4RaZSM9Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-scss.min.js"
  integrity="sha512-rAb9BrnkhMpxN7NoOM7WwPa3phfCMMUZw568Tyzlj9frNsdUUeltfCTATD6ccnVLtnERR+ZXS85Ybs7wo9IiTQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-css.min.js"
  integrity="sha512-zDjwO/e5eVa5WfYra8CE827RFyA/nqhp8y4da+geEpAqpCnmfAHopCNobQ9sJeLBMQY0OLB+hT+k6bbb0FhdYQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-json.min.js"
  integrity="sha512-IC7rV8RslChgByOdUFC6ePqOGn+OwJhnKC3S5AezM8DAiOdGhJMwgsIvBChsa2yuxxoPbH2+W/kjNUM1cc+jUQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-yaml.min.js"
  integrity="sha512-j9sRnEoasdNn9OSwsCxjrQi1H55NqBFDJ+oe7me3sIfvDLeTyzvnZXf0eJqL5CvX6rswU2Sld9PnTVQ0Xy2CFQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-batch.min.js"
  integrity="sha512-YzSVmlznJS4QEi5/tSS9iZ/tVFGdQSKO/F2jsofNH+5PifywJfsOtOZaia+URhumCMdXTTG2UZQ4vtBHWids+Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-lisp.min.js"
  integrity="sha512-3c6jwEnUKsrvucb8b9xdDJw13zOdbeP83PvlSKeoTCCWGacG03MUWHCcBev2NKHA+w8IAWZsGXBcNMaIH/VWYA=="
  crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.8.3/mermaid.min.js"
  integrity="sha512-+TNmhaRJf3jyYHTpzEq/5I6b+aGyhzWb21mGdHAjxSGSYwxN9Grug3Y3B9qVxWfKKY8MscE/6mr9walWvFLFvQ=="
  crossorigin="anonymous"></script>

<script>
  mermaid.initialize({ startOnLoad: true });

  (function () {
    const elems = document.querySelectorAll('code.language-mermaid');
    for (let i = 0; i < elems.length; i++) {
      const id = `mermaid-${i}`;
      const elem = elems[i];
      const source = elem.innerText;
      const cb = (svg) => {
        const div = document.createElement('div');
        div.innerHTML = svg;
        elem.parentElement.replaceWith(div);
      };
      mermaid.render(id, source, cb);
    }
  })();
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js"
  integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg=="
  crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js"
  integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg=="
  crossorigin="anonymous"></script>

<script>
  renderMathInElement(document.body,
    {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false },
      ]
    }
  );

  var inlineMathArray = document.querySelectorAll("script[type='math/tex']");
  for (var i = 0; i < inlineMathArray.length; i++) {
    var inlineMath = inlineMathArray[i];
    var tex = inlineMath.innerText || inlineMath.textContent;
    var replaced = document.createElement("span");
    replaced.innerHTML = katex.renderToString(tex, { displayMode: false });
    inlineMath.parentNode.replaceChild(replaced, inlineMath);
  }

  var displayMathArray = document.querySelectorAll("script[type='math/tex; mode=display']");
  for (var i = 0; i < displayMathArray.length; i++) {
    var displayMath = displayMathArray[i];
    var tex = displayMath.innerHTML;
    var replaced = document.createElement("span");
    replaced.innerHTML = katex.renderToString(tex.replace(/%.*/g, ''), { displayMode: true });
    displayMath.parentNode.replaceChild(replaced, displayMath);
  }
</script>


<script>
  var host = "libsora.so";
  if (host == window.location.host) {
    window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
    ga('create','UA-37862172-2','auto');ga('send','pageview')
  } else {
    console.log("skip google analytics");
  }
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>


</body>
</html>

