<!doctype html>
<html class="no-js" lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Hugo 0.78.1" />

  <title> HTML textarea의 개행문자는 무엇일까? &middot; /usr/lib/libsora.so </title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="naver-site-verification" content="2ddc1a56777489f4a64a4f6a59822f8b1c1ea502"/>
  <meta name="google-site-verification" content="VsvNNnJZUV-iLEYKNju16p-HtDqZeqL15H-VVy-HwpA" />

  <meta name="gc:client-id" content="785d47c81cbc2fd42b65">
  <meta name="gc:client-secret" content="5e5d558f0b16fae154aa47fc9d94f7c09e540ec7">

  
  <meta name="author" content="if1live" />
  

  
  <meta name="description" content="HTML textarea의 개행문자는 무엇일까?" />
  

  
  <meta name="keywords" content="bug, html, textarea, newline" />
  

  
  
<meta name="twitter:card" content="summary">
<meta name="og:url" content="https://libsora.so/posts/what-is-textarea-newline/">

<meta name="twitter:site" content="@if1live">


<meta name="twitter:title" content="HTML textarea의 개행문자는 무엇일까?">
<meta name="twitter:description" content="개요 내가 요즘에 만드는 것은 HTTP기반의 모바일 게임이다. 서버와 클라는 HTTP로 통신을 하고 클라는 서버의 요청을 예쁘게 그려주는 역할을 수행한다. 간단히 말하면 서버는 그냥 웹서버고 클라는 특별한 브라우저라고 할 수 있다.
런칭 직전에 게임에서 이상한 버그를 발견했다. 관리도구에서 열어보면 {first-line}{newline}{second-lin">

<meta name="twitter:image:src" content="https://www.gravatar.com/avatar/fb9672e7e0d256f39369595381d1ea07">



  

  
  
  <link rel="stylesheet" href="https://libsora.so/css/style-gen.css?2">

  
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

  
  <link href="https://libsora.so/index.xml" rel="alternate" type="application/rss+xml" title="/usr/lib/libsora.so" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/themes/prism.min.css"
  integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ=="
  crossorigin="anonymous" />
<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/plugins/line-numbers/prism-line-numbers.min.css"
  integrity="sha512-cbQXwDFK7lj2Fqfkuxbo5iD1dSbLlJGXGpfTDqbggqjHJeyzx88I3rfwjS38WJag/ihH7lzuGlGHpDBymLirZQ=="
  crossorigin="anonymous" />

  
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css"
  integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw=="
  crossorigin="anonymous" />


  
  <script type="text/javascript">
    var host = "libsora.so";
    if ((host == window.location.host) && (window.location.protocol != "https:")) {
      window.location.protocol = "https";
    } else {
      console.log("skip https redirect");
    }
  </script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: "ca-pub-3043297488880636",
  enable_page_level_ads: true
});
</script>

</head>
<body>

<header class="header">
  <h1 class="font-monospace">
    <a href="https://libsora.so/">/usr/lib/libsora.so</a>
  </h1>
  <nav>
    <h2 hidden>Navigation</h2>
    <ul class="nav-link-list">
      <li>
        <a href="https://libsora.so/about/"  title="about">
          <i class="fa fa-info"><span hidden>about</span></i>
        </a>
      </li>
      <li>
        <a href="https://libsora.so/projects/"  title="projects">
          <i class="fa fa-code"><span hidden>projects</span></i>
        </a>
      </li>
      <li>
        <a href="https://libsora.so/archives/"  title="archives">
          <i class="fa fa-archive"><span hidden>Archives</span></i>
        </a>
      </li>
      <li>
        <a href="https://libsora.so/tags/"  title="tags">
          <i class="fa fa-tags"><span hidden>Tags</span></i>
        </a>
      </li>
      <li>
        <a href="https://libsora.so/search/"  title="search">
          <i class="fa fa-search"><span hidden>Search</span></i>
        </a>
      </li>
    </ul>
  </nav>
</header>


<div class="container">
  <article class="basic-content article-content">
    <header>
      <hgroup class="entry-title">
        <a href="/posts/what-is-textarea-newline/" rel="bookmark" title="Permalink to HTML textarea의 개행문자는 무엇일까?">
          <h1>HTML textarea의 개행문자는 무엇일까?</h1>
          
          <h2>LF vs CRLF vs 상황에 따라 다르다 vs 충격과 공포</h2>
          
        </a>
      </hgroup>
    </header>

    <footer class="post-info">
      <abbr class="published" title='2015-10-25T00:00:00Z'>
        2015/10/25
      </abbr>
      
      <address class="vcard author">
        By <a href="//twitter.com/if1live">@if1live</a>
      </address>
      

      <ul class="list-of-tags tags-in-article">
        
        <li>
          <a href="/tags/bug">#bug</a>
        </li>
        
        <li>
          <a href="/tags/html">#html</a>
        </li>
        
        <li>
          <a href="/tags/textarea">#textarea</a>
        </li>
        
        <li>
          <a href="/tags/newline">#newline</a>
        </li>
        
      </ul>
    </footer>

    <section class="entry-content">
      <h2 id="개요">개요</h2>
<p>내가 요즘에 만드는 것은 HTTP기반의 모바일 게임이다. 서버와 클라는 HTTP로
통신을 하고 클라는 서버의 요청을 예쁘게 그려주는 역할을 수행한다. 간단히
말하면 서버는 그냥 웹서버고 클라는 특별한 브라우저라고 할 수 있다.</p>
<p>런칭 직전에 게임에서 이상한 버그를 발견했다. 관리도구에서 열어보면
<code>{first-line}{newline}{second-line}</code> 으로 보이는데 실제 게임에 보면
<code>{first-line}{newline}{newline}{second-line}</code> 으로 보이는 버그였다.
의도하지 않게 개행이 하나 더 들어갔다.</p>
<p>찾기는 어려웠지만 원인은 생각보다 간단했다. 의도하지 않은 <code>CR</code> 이 DB에
저장되어 있고 클라가 <code>CR</code> 을 제대로 처리를 하지 않아서 두줄짜리 개행으로
보인거였다. (찾기 어려운건 <code>CR</code> 이 눈에 보이는 글자가 아니기 때문)</p>
<p>의도하지 않은 <code>CR</code> 은 급한대로 사용한 rails_admin의 textarea 때문에
DB에 저장된 것이었다. 그렇다면 여기서 문제, textarea의 개행문자는 뭘까?
textarea는 항상 <code>CRLF</code> 를 개행으로 쓰는가? 내가 윈도우 크롬에서 HTTP
요청을 날렸기 때문에 <code>CRLF</code> 가 저장된걸까? 아니면 textarea가 뭐를
서버한테 보내든지 상관없이 rails가 개행을 <code>CRLF</code> 로 치환한걸까?</p>
<p><a href="https://twitter.com/if1live/status/657422182235119616">@if1live</a></p>
<pre><code>어제 제대로 낚인 버그의 근원이 갑자기 궁금해졌다
Q: textarea에다가 다음을 넣고 submit했다. 서버에서는 무엇이 도착하는가?
&quot;foo
bar&quot;
A: &quot;foo\r\nbar&quot;
B: &quot;foo\nbar&quot;
C: 브라우저에 따라서 다르다
</code></pre>
<h2 id="test">Test</h2>
<p>HTML textarea의 개행문자가 무엇인지 확인하려고 다음의 테스트를 준비했다.</p>
<ul>
<li><code>LF</code> , <code>CRLF</code> 을 섞어서 HTML textarea에 집어 넣는다.</li>
<li>HTML textarea를 submit하고 서버에 어떤 값이 도착하는지 확인한다.</li>
<li>wireshark를 이용해서 해석</li>
</ul>
<p>테스트 코드는 여기에서 볼 수 있다.
<a href="https://github.com/if1live/libsora.so/tree/master/content/development/what-is-textarea-newline">Repo</a></p>
<p>6가지 경우의 개행문자의 조합을 테스트했다.</p>
<ul>
<li><code>\n</code> 만 사용하면 어떻게 되는가?</li>
<li><code>\r</code> 만 사용하면 어떻게 되는가? (예외 처리 테스트)</li>
<li><code>\n</code> 을 연속으로 사용하면 어떻게 되는가?</li>
<li><code>\r</code> 을 연속으로 사용하면 어떻게 되는가? (예외 처리 테스트)</li>
<li><code>\r\n</code> (CRLF)를 사용하면 어떻게 되는가?</li>
<li><code>\n\r</code> (LFCR)을 사용하면 어떻게 되는가? (예외 처리 테스트)</li>
</ul>
<p>POST, GET일때 기본적인 내용은 동일하더라. 그래서 POST 일때만 정리했다.</p>
<p><img src="/posts/what-is-textarea-newline/browser-input.png" alt="간단하게 구현한 POST 요청을 보내는 HTML이다. 겉보기에는 평범한 개행이들어있는 textarea이지만 실제로는 각각의 줄은 다른 개행문자를쓰고있다."></p>
<p><img src="/posts/what-is-textarea-newline/wireshark-input.png" alt="서버에서 생성한 테스트용 개행문자가 섞인 HTML은 클라에 잘 도착했다.나머지는 브라우저의역할이다."></p>
<p><img src="/posts/what-is-textarea-newline/browser-output.png" alt="클라가 submit 한 결과를 그대로 출력했다. CRLF 만 보인다. 각각의 줄의결과는 아래에서분석한다."></p>
<p><img src="/posts/what-is-textarea-newline/wireshark-output.png" alt="클라가 보낸 요청을 wireshark 로 열어본 것이다. form의 내용을 열어보면CRLF 만보인다."></p>
<h3 id="result">Result</h3>
<p>wireshark로 확인해 본 결과 브라우저로 진입하는 순간에는 <code>LF</code>, <code>CRLF</code> 를
포함한 여러가지 개행문자 조합이 존재하지만 브라우저에서 나올때는 <code>CRLF</code>
만 남아있다. (글에서는 POST만 다루었지만 실제로는 GET, POST 요청의
결과가 동일하다)</p>
<p>6가지 개행문자를 이용해서 테스트한 결과를 정리하면 다음과 같다.</p>
<ul>
<li>LF만 사용하는 경우 : <code>only-LF\n</code> -&gt; <code>only-LF\r\n</code>
<ul>
<li>CRLF로 치환</li>
</ul>
</li>
<li>CR만 사용하는 경우 : <code>only-CR\r</code> -&gt; <code>only-CR\r\n</code>
<ul>
<li>CRLF로 치환</li>
</ul>
</li>
<li>연속된 LF를 사용하는 경우 : <code>many-LF\n\n</code> -&gt; <code>many-LF\r\n\r\n</code>
<ul>
<li>각각의 LF를 CRLF로 치환</li>
</ul>
</li>
<li>연속된 CR을 사용하는 경우 : * <code>many-CR\r\r</code> -&gt; <code>many-cr\r\n\r\n</code>
<ul>
<li>각각의 CR을 CRLF로 치환</li>
</ul>
</li>
<li>CRLF를 사용하는 경우 : <code>CRLF\r\n</code> -&gt; <code>CRLF\r\n</code>
<ul>
<li>변경 없음</li>
</ul>
</li>
<li>LFCR을 사용하는 경우 : <code>LFCR\r\n</code> -&gt; <code>LFCR\r\n\r\n</code>
<ul>
<li>CRLF가 2개로 바뀐다. 첫번째 LF에 의해서 CRLF가 나오고 두번째 CR에 의해서 CRLF가 나온거로 보인다</li>
</ul>
</li>
</ul>
<p>즉, textarea에는 어떤 개행을 넣든지간에 <code>CRLF</code> 만 나온다.</p>
<h2 id="끝">끝?</h2>
<p>과면 이걸로 끝날까? wireshark를 이용해서 브라우저로 진입하는 순간과
브라우저에서 나오는 순간은 관측했지만 브라우저 내부에서는 어떻게
처리되는지를 확인하지 못했다. 서버에서 보낸 여러 개행문자가 섞인
문자열이 textarea에 올바르게 들어가있는지 확인해보자. 테스트용으로
사용한 HTML에서 다음 자바스크립트를 실행시키면 내용을 볼 수 있다. CR,
LF에 대응되는 문자를 읽을수 있는 문자열로 바꾸는 함수이다.</p>
<pre><code class="language-javascript">function convertReadableString(text) {
  var readable = &quot;&quot;;
  for(var i = 0 ; i &lt; text.length; ++i) {
    var code = text.charCodeAt(i);
    if(code == 10) {
      readable += &quot;&lt;LF&gt;&quot;;
    } else if(code == 13) {
      readable += &quot;&lt;CR&gt;&quot;;
    } else {
      readable += text[i];
    }
  }
  return readable;
}
var node = document.getElementsByTagName('textarea')[0];
convertReadableString(node.value);
</code></pre>
<p><img src="/posts/what-is-textarea-newline/textarea-js.png" alt="output"></p>
<p><strong>CR이 전부 사라졌다!!!</strong> 게다가 <strong>LF만 있는데 어떻게 클라의 요청에는
CRLF가 있던거지???</strong></p>
<p>이 질문의 답을 찾으려면 HTML 스펙 문서를 뒤져야한다.</p>
<h3 id="왜-cr이-전부-lf가-되었는가">왜 CR이 전부 LF가 되었는가?</h3>
<p>HTML5 스펙문서의 &ldquo;4.10.11 The textarea element&rdquo; 에서 이것과 관련된
내용을 찾을수 있다.</p>
<p><a href="http://www.w3.org/TR/html5/forms.html#concept-textarea-raw-value">http://www.w3.org/TR/html5/forms.html#concept-textarea-raw-value</a></p>
<p>간단하게 요약하면 textarea의 value를 이용해서 값에 접근할때 CR, CRLF가
있으면 LF로 치환한 결과를 보여준다는거다. 그래서 자바스크립트로 얻은
textarea의 value에는 CR이 없다.</p>
<h3 id="왜-lf가-요청에서는-crlf로-보이는가">왜 LF가 요청에서는 CRLF로 보이는가?</h3>
<p>form를 submit하는 과정을 정의한 스펙문서를 찾으면 이유를 알 수 있다.
스펙 문서의 두군데를 참고한다.</p>
<p>HTML5 스펙의 &ldquo;4.10.19.6 Form submission&quot;를 보면 form 태그의 enctype
속성의 기본값이 application/x-www-form-urlencoded 라는 것을 알 수 있다.
(HTML을 잘 아는 사람은 이미 아는 내용일거다)</p>
<p><a href="http://www.w3.org/TR/html5/forms.html#attr-fs-enctype">http://www.w3.org/TR/html5/forms.html#attr-fs-enctype</a></p>
<p>form의 enctype 속성이 application/x-www-form-urlencoded 일때 form이
어떻게 submit 되는지는 HTML4 스펙의 &ldquo;17.13.4 Form content types&rdquo; 에서
찾을수 있다. 개행문자를 CRLF로 바꾼다고 한다.</p>
<p><a href="http://www.w3.org/TR/html4/interact/forms.html#h-17.13.4.1">http://www.w3.org/TR/html4/interact/forms.html#h-17.13.4.1</a></p>
<p>HTML5에서도 동일한 내용을 찾았지만 HTML4쪽의 내용이 읽기 쉽더라. HTML5
스펙 문서의 &ldquo;4.10.22.4 Constructing the form data set&rdquo;</p>
<p><a href="http://www.w3.org/TR/html5/forms.html#constructing-form-data-set">http://www.w3.org/TR/html5/forms.html#constructing-form-data-set</a></p>
<h2 id="풀어쓴-내부-구조">풀어쓴 내부 구조</h2>
<p>textarea가 하나 있다. 여기에 개행문자가 섞인 문자열을 입력하고
submit했을때 벌어지는 과정을 풀어쓰면 다음과 같다.</p>
<ol>
<li>태초에 form 태그가 있었다. form의 enctype은
application/x-www-form-urlencoded 였다. (기본값)</li>
<li>form 태그의 child로 textarea가 있었다.</li>
<li>textarea에 개행문자가 섞인 문자열이 textarea에 들어있다. (사용자가
입력했을수도 있고 서버에서 내용을 채웠을수도 있다)</li>
<li>form을 submit한다.
<ol>
<li>textarea의 value에 접근한다. CRLF, CR이 LF로 바뀌어있는 문자열을 얻는다.</li>
<li>textarea에서 얻은 문자열의 LF는 CRLF로 치환된다.</li>
<li>이를 적절히 submit 한다.</li>
</ol>
</li>
<li>서버에는 개행문자가 전부 CRLF인 문자열이 도착한다.</li>
</ol>
<h2 id="summary">Summary</h2>
<ul>
<li>겉으로 보이는 것만 봐서는 숨겨진 의미를 알 수 없다.
<ul>
<li>자바스크립트로 textarea.value를 보기전 까지는 브라우저 내부에서 CRLF로 모든걸 처리하는줄 알았다.</li>
</ul>
</li>
<li>브라우저에서는 textarea의 개행문자가 LF, 서버로 전달되는 textarea의 개행문자는 CRLF
<ul>
<li>CR을 주의하지 않으면 나처럼 사고친다.</li>
</ul>
</li>
<li><strong>HTML 스펙문서를 읽자</strong></li>
</ul>

    </section>

    <ul class="articles-timeline">
      <li class="previous-article">
        
        <a href="https://libsora.so/posts/stack-allocation-voodoo-magic/" title="Next: 스택 지역 변수의 주소값을 이용한 버그">
          스택 지역 변수의 주소값을 이용한 버그
          
          <br/><small>Off-By-One Error를 이용한 무한루프 구현(?)</small>
          
        </a>
        
      </li>

      <li class="next-article">
        
        <a href="https://libsora.so/posts/deceiving-code-bitmask/" title="Previous: bit mask로 사람 낚기. (flags &amp; MASK == MASK)">
          bit mask로 사람 낚기. (flags &amp; MASK == MASK)
          
          <br/><small>연산자 우선순위로 낚시하기. 그리고 회피법</small>
          
        </a>
        
      </li>
    </ul>

    <section class="entry-content">
      <section class="disqus-section">
<h1 hidden>Comment</h1>
<div id="disqus_thread"></div>
<script type="text/javascript">
  var host = "libsora.so";
  if (host == window.location.host) {
    var disqus_shortname = 'libsora';
    var disqus_identifier = 'http://libsora.so\/posts\/what-is-textarea-newline\/';

    (function() {
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  } else {
    console.log("skip disqus");
  }
</script>
<noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>

    </section>
  </article>
</div>

<footer class="footer">
  <ul class="nav-link-list">
    
    
    
    <li>
      
      <a href="//twitter.com/if1live" title="Twitter"><i class="fa fa-twitter"> </i></a>
    </li>
    
    
    
    <li>
      
      <a href="//github.com/if1live" title="GitHub"><i class="fa fa-github"> </i></a>
    </li>
    
    
    
    <li>
      
      <a href="//bitbucket.org/if1live" title="BitBucket"><i class="fa fa-bitbucket"> </i></a>
    </li>
    

    <li>
      
      <a href="https://libsora.so/index.xml"><i class="fa fa-rss"> </i></a>
    </li>

    
  </ul>

  <p>
    <a href="//gohugo.io/" title="Hugo">Hugo</a> |
    
    <a href="//twitter.com/if1live/" title="@if1live">@if1live</a>
    
  </p>
</footer>

<script src="/js/common.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/prism.min.js"
  integrity="sha512-9+422Bs3A87UkWfp+qV80Nfv9arhbCXKY1rxrF2seorI36mIIstMiuBfyKLF1yH1nnzQkEWq2xrzT4XU3Z+vrA=="
  crossorigin="anonymous"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/plugins/line-numbers/prism-line-numbers.min.js"
  integrity="sha512-1oLZvExT5RaW4q2GgvRPf+XzVVGmsKirfZBRN7aifdOpvZ1L9idEncfMFlfHiQNGBA+Sev+alscSAT/xQ0rwXA=="
  crossorigin="anonymous"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-clike.min.js"
  integrity="sha512-/WJ9ZNER39LEXW4XzFoMR6ct++/HT++A71MDW2gBbUJExj8hFRtde5Q5QzcHyBMxU97VeH1wEHGBRtNuGJpV4w=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-c.min.js"
  integrity="sha512-TO7UeOg1N67oP7UU2OzrOm0oZrTz2TXGNRtkf/x+d9Pt5O8cb5jeSRcryiXqW/Nd25VEc8Qqtu8Dx1EVV7AJLQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-cpp.min.js"
  integrity="sha512-dzF2RO45FHCMPdWDQ3I7Cn9xPvCM8x8T4ODz+kSPQl5CAuIMy6Ekb2i2DAjLEpG/V/DL9f/O7+9E/HZQQx89IA=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-typescript.min.js"
  integrity="sha512-5KnWNKu6jz8OE4nIBndz3PZ4O3RGqcPNcsyEFZkx3F5N8liSwc3bCe4qPOa/a3+e4CxVl0izHMXeZ0Z4yk7LTA=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-python.min.js"
  integrity="sha512-EXseTM1JV8e3AonU5PfOUmzbPkUTRm4c4hVxv206gVeWZE/FwzSQBNWrUBaHsN3Idq9k76BEjUlXpluX1UFx6Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-javascript.min.js"
  integrity="sha512-UN3RxBb1KfsWQUMNl19SU/JPer3v8jTBpfGyQaBEuaVjP5q0Gz9ihj8MiHEUZYnc1krYRm5imVebjq1egsSaKA=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-java.min.js"
  integrity="sha512-p2vAaPEsPvlIESCpoEI5IyzZowfdVZ2O39PsrOrkuTQl+AjD57T4L/Wxv5S8WCToLou0twQZaWO+tt660Rqb6Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-csharp.min.js"
  integrity="sha512-qvSIQfI/qEeMC1E1LMSPCsDl8vFzl0rkBfF6dDcnMJxQT+8M2WjSyDGqHQzZa+RChv3jkdKnZAo99BcAbGsnQg=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-bash.min.js"
  integrity="sha512-CILPDr/8BlkkElCeI+f2yMu0fzgwWqpQ0Cdr0busFfySJJ4SoCRivbT6+Z+SWPkjWwBil9NO0tHd6NSfpwiQaA=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-ruby.min.js"
  integrity="sha512-Wgi0cnFpl5EY8xLe1RO+uTsot86wzAbW/BIoqZopPU+8YW79VDqQE9qTe1R+1uhxLsPBHE+nYwACS+eTsE5GtQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-go.min.js"
  integrity="sha512-hVtwzUDz/n7RqQmiQ7xYAJCTTJe5C52Ung+4Kpz2fPRq7nq2h5gHHQe2HRy7f1Tj3OUVgTO5WRx7XuwT624C9Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-less.min.js"
  integrity="sha512-REVnwsprLWmQbtt0WjkS59nMvtKE0olIjUx+N/k3Gqa5WhmrZ7o0ahGhKYnIK6W2+ITg4cQ2UqZkka4RaZSM9Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-scss.min.js"
  integrity="sha512-rAb9BrnkhMpxN7NoOM7WwPa3phfCMMUZw568Tyzlj9frNsdUUeltfCTATD6ccnVLtnERR+ZXS85Ybs7wo9IiTQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-css.min.js"
  integrity="sha512-zDjwO/e5eVa5WfYra8CE827RFyA/nqhp8y4da+geEpAqpCnmfAHopCNobQ9sJeLBMQY0OLB+hT+k6bbb0FhdYQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-json.min.js"
  integrity="sha512-IC7rV8RslChgByOdUFC6ePqOGn+OwJhnKC3S5AezM8DAiOdGhJMwgsIvBChsa2yuxxoPbH2+W/kjNUM1cc+jUQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-yaml.min.js"
  integrity="sha512-j9sRnEoasdNn9OSwsCxjrQi1H55NqBFDJ+oe7me3sIfvDLeTyzvnZXf0eJqL5CvX6rswU2Sld9PnTVQ0Xy2CFQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-batch.min.js"
  integrity="sha512-YzSVmlznJS4QEi5/tSS9iZ/tVFGdQSKO/F2jsofNH+5PifywJfsOtOZaia+URhumCMdXTTG2UZQ4vtBHWids+Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-lisp.min.js"
  integrity="sha512-3c6jwEnUKsrvucb8b9xdDJw13zOdbeP83PvlSKeoTCCWGacG03MUWHCcBev2NKHA+w8IAWZsGXBcNMaIH/VWYA=="
  crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.8.3/mermaid.min.js"
  integrity="sha512-+TNmhaRJf3jyYHTpzEq/5I6b+aGyhzWb21mGdHAjxSGSYwxN9Grug3Y3B9qVxWfKKY8MscE/6mr9walWvFLFvQ=="
  crossorigin="anonymous"></script>

<script>
  mermaid.initialize({ startOnLoad: true });

  (function () {
    const elems = document.querySelectorAll('code.language-mermaid');
    for (let i = 0; i < elems.length; i++) {
      const id = `mermaid-${i}`;
      const elem = elems[i];
      const source = elem.innerText;
      const cb = (svg) => {
        const div = document.createElement('div');
        div.innerHTML = svg;
        elem.parentElement.replaceWith(div);
      };
      mermaid.render(id, source, cb);
    }
  })();
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js"
  integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg=="
  crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js"
  integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg=="
  crossorigin="anonymous"></script>

<script>
  renderMathInElement(document.body,
    {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false },
      ]
    }
  );

  var inlineMathArray = document.querySelectorAll("script[type='math/tex']");
  for (var i = 0; i < inlineMathArray.length; i++) {
    var inlineMath = inlineMathArray[i];
    var tex = inlineMath.innerText || inlineMath.textContent;
    var replaced = document.createElement("span");
    replaced.innerHTML = katex.renderToString(tex, { displayMode: false });
    inlineMath.parentNode.replaceChild(replaced, inlineMath);
  }

  var displayMathArray = document.querySelectorAll("script[type='math/tex; mode=display']");
  for (var i = 0; i < displayMathArray.length; i++) {
    var displayMath = displayMathArray[i];
    var tex = displayMath.innerHTML;
    var replaced = document.createElement("span");
    replaced.innerHTML = katex.renderToString(tex.replace(/%.*/g, ''), { displayMode: true });
    displayMath.parentNode.replaceChild(replaced, displayMath);
  }
</script>


<script>
  var host = "libsora.so";
  if (host == window.location.host) {
    window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
    ga('create','UA-37862172-2','auto');ga('send','pageview')
  } else {
    console.log("skip google analytics");
  }
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>


</body>
</html>

