<!doctype html>
<html class="no-js" lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Hugo 0.78.1" />

  <title> delete this 이용해서 터미널에 삼각형 그리기 &middot; /usr/lib/libsora.so </title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="naver-site-verification" content="2ddc1a56777489f4a64a4f6a59822f8b1c1ea502"/>
  <meta name="google-site-verification" content="VsvNNnJZUV-iLEYKNju16p-HtDqZeqL15H-VVy-HwpA" />

  <meta name="gc:client-id" content="785d47c81cbc2fd42b65">
  <meta name="gc:client-secret" content="5e5d558f0b16fae154aa47fc9d94f7c09e540ec7">

  
  <meta name="author" content="if1live" />
  

  
  <meta name="description" content="delete this 이용해서 터미널에 삼각형 그리기" />
  

  
  <meta name="keywords" content="black magic, destructor, delete, recursion" />
  

  
  
<meta name="twitter:card" content="summary">
<meta name="og:url" content="https://libsora.so/posts/recursion-with-destructor/">

<meta name="twitter:site" content="@if1live">


<meta name="twitter:title" content="delete this 이용해서 터미널에 삼각형 그리기">
<meta name="twitter:description" content="어제 회사에서 delete this 에 대해 이것저것 이야기를 했었다. 그리고 꿈에서 delete this 로 재귀를 구현하는 흑마법이 생각나서 짜봤다.
 목표 : delete this를 이용해서 다음과 같은 삼각형을 출력해야한다.  for, while 같은 키워드 사용 금지 명시적인 재귀호출 없음, 단 delete this는 허용    * ** ***  ">

<meta name="twitter:image:src" content="https://www.gravatar.com/avatar/fb9672e7e0d256f39369595381d1ea07">



  

  
  
  <link rel="stylesheet" href="https://libsora.so/css/style-gen.css?2">

  
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

  
  <link href="https://libsora.so/index.xml" rel="alternate" type="application/rss+xml" title="/usr/lib/libsora.so" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/themes/prism.min.css"
  integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ=="
  crossorigin="anonymous" />
<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/plugins/line-numbers/prism-line-numbers.min.css"
  integrity="sha512-cbQXwDFK7lj2Fqfkuxbo5iD1dSbLlJGXGpfTDqbggqjHJeyzx88I3rfwjS38WJag/ihH7lzuGlGHpDBymLirZQ=="
  crossorigin="anonymous" />

  
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css"
  integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw=="
  crossorigin="anonymous" />


  
  <script type="text/javascript">
    var host = "libsora.so";
    if ((host == window.location.host) && (window.location.protocol != "https:")) {
      window.location.protocol = "https";
    } else {
      console.log("skip https redirect");
    }
  </script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: "ca-pub-3043297488880636",
  enable_page_level_ads: true
});
</script>

</head>
<body>

<header class="header">
  <h1 class="font-monospace">
    <a href="https://libsora.so/">/usr/lib/libsora.so</a>
  </h1>
  <nav>
    <h2 hidden>Navigation</h2>
    <ul class="nav-link-list">
      <li>
        <a href="https://libsora.so/about/"  title="about">
          <i class="fa fa-info"><span hidden>about</span></i>
        </a>
      </li>
      <li>
        <a href="https://libsora.so/projects/"  title="projects">
          <i class="fa fa-code"><span hidden>projects</span></i>
        </a>
      </li>
      <li>
        <a href="https://libsora.so/archives/"  title="archives">
          <i class="fa fa-archive"><span hidden>Archives</span></i>
        </a>
      </li>
      <li>
        <a href="https://libsora.so/tags/"  title="tags">
          <i class="fa fa-tags"><span hidden>Tags</span></i>
        </a>
      </li>
      <li>
        <a href="https://libsora.so/search/"  title="search">
          <i class="fa fa-search"><span hidden>Search</span></i>
        </a>
      </li>
    </ul>
  </nav>
</header>


<div class="container">
  <article class="basic-content article-content">
    <header>
      <hgroup class="entry-title">
        <a href="/posts/recursion-with-destructor/" rel="bookmark" title="Permalink to delete this 이용해서 터미널에 삼각형 그리기">
          <h1>delete this 이용해서 터미널에 삼각형 그리기</h1>
          
          <h2>delete this &#43; operator delete =&gt; recursion</h2>
          
        </a>
      </hgroup>
    </header>

    <footer class="post-info">
      <abbr class="published" title='2016-03-19T00:00:00Z'>
        2016/03/19
      </abbr>
      
      <address class="vcard author">
        By <a href="//twitter.com/if1live">@if1live</a>
      </address>
      

      <ul class="list-of-tags tags-in-article">
        
        <li>
          <a href="/tags/black-magic">#black magic</a>
        </li>
        
        <li>
          <a href="/tags/destructor">#destructor</a>
        </li>
        
        <li>
          <a href="/tags/delete">#delete</a>
        </li>
        
        <li>
          <a href="/tags/recursion">#recursion</a>
        </li>
        
      </ul>
    </footer>

    <section class="entry-content">
      <p>어제 회사에서 <code>delete this</code> 에 대해 이것저것 이야기를 했었다.
그리고 꿈에서 <code>delete this</code> 로 재귀를 구현하는 흑마법이 생각나서 짜봤다.</p>
<ul>
<li>목표 : <code>delete this</code>를 이용해서 다음과 같은 삼각형을 출력해야한다.
<ul>
<li><code>for</code>, <code>while</code> 같은 키워드 사용 금지</li>
<li>명시적인 재귀호출 없음, 단 <code>delete this</code>는 허용</li>
</ul>
</li>
</ul>
<pre><code>*
**
***
</code></pre>
<h2 id="기본-구현">기본 구현</h2>
<p><code>delete</code>를 쓰면 메모리를 해제하고 소멸자를 호출한다.
그렇다면 소멸자 안에서 <code>delete this</code>를 사용하면 자기 자신의 소멸자를 다시 호출할테니 재귀호출이 되는거 아니냐?</p>
<pre><code class="language-cpp">#include &lt;cstdio&gt;
#include &lt;string&gt;

int from = 0;
int to = 3;
int counter = from;
class DtorRecursion {
public:
  ~DtorRecursion() {
    if(counter &lt; to) {
      line += &quot;*&quot;;
      printf(&quot;%s\n&quot;, line.data());

      counter += 1;
      delete(this);
    }
  }

private:
  std::string line;
};

int main()
{
  { DtorRecursion loop; }
  return 0;
}
</code></pre>
<pre><code class="language-bash">$ clang++ simple.cpp
$ ./a.out
*
**
***
a.out(4308,0x7fff77901000) malloc: *** error for object 0x7fff54a28be0: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
</code></pre>
<p>이미 해제한 메모리를 다시 해제하는 것으로 인해 문제가 생기는 것을 제외하면 의도한대로 돌아간다.
현재의 코드에는 루프과 끝이 전역변수로 하드코딩 되어있다. 이를 개선해보자.</p>
<h2 id="범용적으로-바꿔보자">범용적으로 바꿔보자</h2>
<pre><code class="language-cpp">#include &lt;cstdio&gt;
#include &lt;string&gt;
#include &lt;memory&gt;
#include &lt;iostream&gt;

template&lt;int From, int To, typename Runnable&gt;
class DestructorRecursion {
public:
  static const int counter_from = From;
  static const int counter_to = To;

  ~DestructorRecursion() {
    if(_counter &lt; counter_to) {
      _runnable();
      _counter += ((From &lt; To) ? +1 : -1);
      delete this;
    }
  }

private:
  static int _counter;
  static Runnable _runnable;
};

template&lt;int From, int To, typename Runnable&gt;
int DestructorRecursion&lt;From, To, Runnable&gt;::_counter = From;

template&lt;int From, int To, typename Runnable&gt;
Runnable DestructorRecursion&lt;From, To, Runnable&gt;::_runnable;

class TrianglePrinter {
public:
  void operator()() {
    line += &quot;*&quot;;
    printf(&quot;%s\n&quot;, line.data());
  }
private:
  std::string line;
};


int main()
{
  DestructorRecursion&lt;0, 3, TrianglePrinter&gt; foo;
  return 0;
}
</code></pre>
<p>간단한 구현에서 부족했던 부분을 약간 개선해봤다.</p>
<ol>
<li>루프의 시작과 끝을 템플릿 인자로 넘길수 있다.</li>
<li>루프에서 어떤 기능을 수행할지를 템플릿 인자로 넘길수 있다.</li>
</ol>
<pre><code class="language-bash">$ clang++ destructor_recursion.cpp
$ ./a.out
*
**
***
a.out(4246,0x7fff77901000) malloc: *** error for object 0x7fff52a90bf8: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
</code></pre>
<p>하지만 아직 몇가지 문제가 남아있다.</p>
<p>첫번째는 thread-safe 하지 않다는 점이다.
루프의 작업 내용과 카운터의 값이 클래스 정적변수에 저장되어있다.
만약 똑같은 루프 시작값, 끝값, 작업용 클래스를 넘겨서 또다른 루프를 생성하면 값을 덮어쓸 가능성이 있다.</p>
<p>두번째 문제는 이미 해제한 메모리를 다시 해제하는 문제를 해결하지 못했다는 점이다.
<code>delete this</code> 대신에 <a href="/posts/call-ctor-dtor">소멸자를 수동으로 호출</a>한다면 이미 해제된 메모리를 다시 해제하는 문제를 피할수 있지만 명시적인 함수 호출이 되니 피하고 싶다.</p>
<h2 id="죽지-않도록-바꿔보자">죽지 않도록 바꿔보자</h2>
<p>멤버 변수를 이용하면 클래스 정적 변수를 제거할수 있다.
루프의 시작값, 끝값, 현재 상태, 루프에서 어떤 작업을 수행할지를 멤버 변수에 저장하도록 바꿨다.</p>
<p><code>delete this</code>의 메모리 해제까지 직접 개입하려면 <code>operator delete</code>를 수정하면 된다.
소멸자를 여러번 호출해도 메모리가 한번만 해제되도록하려고 <code>_deleted</code> 멤버 변수를 추가했다.
디버깅 목적으로 실제로 메모리를 해제할때 메세지를 출력하도록 수정했다.</p>
<p>이미 지워진 객체의 멤버 변수(<code>_deleted</code>)에 접근하니까 프로그램이 죽지 않을까?
직전까지 유효했던 주소값에서 bool 타입의 값을 읽어오는 방식이라서 바로 죽진 않더라.
해당 주소값의 페이지가 바로 사라지진 않을테니까 프로그램이 크래시나진 않더라.
(물론 올바른 코드는 아니다)</p>
<pre><code class="language-cpp">#include &lt;cstdio&gt;
#include &lt;string&gt;
#include &lt;memory&gt;

template&lt;typename Runnable&gt;
class DestructorRecursion {
public:
  typedef DestructorRecursion&lt;Runnable&gt; self_type;
public:
  DestructorRecursion(int from, int to, Runnable &amp;&amp;r)
    : _counter_from(from),
      _counter_to(to),
      _counter(from),
      _runnable(r),
      _deleted(false)
    {}

  ~DestructorRecursion() {
    if(_counter &lt; _counter_to) {
      _runnable();
      _counter += ((_counter_from &lt; _counter_to) ? +1 : -1);
      delete(this);
    }
  }

  static void operator delete(void* ptr) {
    self_type *self = reinterpret_cast&lt;self_type*&gt;(ptr);
    if(!self-&gt;_deleted) {
      self-&gt;_deleted = true;
      ::operator delete(ptr);
      printf(&quot;operator delete -&gt; memory free\n&quot;);
    }
  }

private:
  const int _counter_from;
  const int _counter_to;
  int _counter;
  Runnable _runnable;

  bool _deleted;
};


class TrianglePrinter {
public:
  void operator()() {
    line += &quot;*&quot;;
    printf(&quot;%s\n&quot;, line.data());
  }
private:
  std::string line;
};

int main()
{
  auto sp1 = std::make_unique&lt;DestructorRecursion&lt;TrianglePrinter&gt;&gt;(0, 3, TrianglePrinter());;
  return 0;
}
</code></pre>
<pre><code class="language-bash">$ clang++ safe_destructor_recursion.cpp -std=c++14 &amp;&amp; ./a.out
*
**
***
operator delete -&gt; memory free
</code></pre>
<p>출력결과를 보니 메모리 해제는 한번만 발생했고 프로그램은 크래시 없이 제대로 종료되었다.
야호! 새로운 루프 구문을 발견했다!</p>
<h2 id="이거-써도-되는거야">이거 써도 되는거야?</h2>
<p><code>delete this</code>를 이용해서 루프구문을 만든다는 정신나간 발상을 진짜로 안전한건지 다시 확인해보자.
재귀안에서 멤버변수로 객체를 하나 넣어두었다.
객체의 생성자/소멸자에서 printf를 찍어보고 쌍이 맞는지 확인하자.</p>
<pre><code class="language-cpp">#include &lt;cstdio&gt;
#include &lt;string&gt;
#include &lt;memory&gt;

template&lt;typename Runnable&gt;
class DestructorRecursion {
public:
  typedef DestructorRecursion&lt;Runnable&gt; self_type;
public:
  DestructorRecursion(int from, int to, Runnable &amp;&amp;r)
    : _counter_from(from),
      _counter_to(to),
      _counter(from),
      _runnable(r),
      _deleted(false)
    {}

  ~DestructorRecursion() {
    if(_counter &lt; _counter_to) {
      _runnable();
      _counter += ((_counter_from &lt; _counter_to) ? +1 : -1);
      delete(this);
    }
    printf(&quot;end of recusion destructor: %lx\n&quot;, (unsigned long)this);
  }

  static void operator delete(void* ptr) {
    self_type *self = reinterpret_cast&lt;self_type*&gt;(ptr);
    if(!self-&gt;_deleted) {
      self-&gt;_deleted = true;
      ::operator delete(ptr);
      printf(&quot;operator delete -&gt; memory free\n&quot;);
    }
  }

private:
  const int _counter_from;
  const int _counter_to;
  int _counter;
  Runnable _runnable;

  bool _deleted;
};


class TrianglePrinter {
public:
  TrianglePrinter(){
    printf(&quot;constructor\t: %lx\n&quot;, (unsigned long)this);
  }
  TrianglePrinter(const TrianglePrinter &amp;o){
    printf(&quot;copy constructor: %lx\n&quot;, (unsigned long)this);
  }
  ~TrianglePrinter() {
    printf(&quot;destructor\t: %lx\n&quot;, (unsigned long)this);
  }
  void operator()() {
    line += &quot;*&quot;;
    printf(&quot;%s\n&quot;, line.data());
  }
private:
  std::string line;
};

int main()
{
  auto sp1 = std::make_unique&lt;DestructorRecursion&lt;TrianglePrinter&gt;&gt;(0, 3, TrianglePrinter());;
  return 0;
}
</code></pre>
<pre><code class="language-bash">$ clang++ member_var_dtor_recursion.cpp -std=c++14 &amp;&amp; ./a.out
constructor	: 7fff5c817be8
copy constructor: 7ffe99d00010
destructor	: 7fff5c817be8
*
**
***
end of recusion destructor: 7ffe99d00000
destructor	: 7ffe99d00010
operator delete -&gt; memory free
end of recusion destructor: 7ffe99d00000
destructor	: 7ffe99d00010
end of recusion destructor: 7ffe99d00000
destructor	: 7ffe99d00010
end of recusion destructor: 7ffe99d00000
destructor	: 7ffe99d00010
</code></pre>
<p>첫번째 줄의 생성자는 <code>DestructorRecursion</code> 객체를 생성할때 생성된 임시객체이다.
이것은 세번째 줄에서 소멸자가 호출되어서 사라졌다.</p>
<p>두번째 줄은 <code>DestructorRecursion</code> 안의 객체에 값을 대입하면서 호출된 복사생성자이다.
그런데 이것의 소멸자는 여러번 호출되었다.
소멸자의 역할중 하나가 멤버 변수의 소멸자를 호출하는 것이기 때문이다.
그래서 <code>~DestructorRecursion()</code>의 맨 마지막줄의 <code>end of recusion destructor</code>가 출력된 다음 <code>destructor</code>가 출력된다.</p>
<p>생성자/소멸자의 쌍이 안맞기 때문에 <code>delete this</code>를 이용한 재귀구문은 실제 생활에서는 쓰면 안된다.
이 프로그램이 크래시나지 않은건 운이 좋아서일뿐이다.
<code>operator()()</code>의 내용이 조금만 바뀌었으면 크래시가 발생할수 있다.
(물론 의도적으로 크래시가 발생하지 않도록 짜는 것도 가능하다.)</p>
<h2 id="언제-쓸수-있는가">언제 쓸수 있는가?</h2>
<p>바로 위에서 사용해서는 안되는 코드라고 했지만 예외가 존재한다.</p>
<p><a href="https://kldp.org/node/99915">아주 간단한 C++ 퀴즈 하나</a></p>
<pre><code>갑자기 옛날에 봤던 문제가 생각나서 올려봅니다.
정말 간단하고 쉬운 문제인데요,
아마 제가 알고있는 답보다 재밌는 답이 많이 나올 수 있을 것 같습니다 ㅎㅎ
보통 처음 C++을 시작하고 for구분을 배우면 짜게되는 대표적인 코드가 삼각형 별표출력코드인데요

*
**
***

뭐 대충 이런식이 되겠지요

문제는..
위 2중 루프를 루프 하나로 줄이는것입니다.
특별한 제한은 없긴한데 루프내부에서 함수호출해서 그함수에서 루프돌거나 실질적 루프인 재귀함수.. 그런건 무효입니다 -_-;
아무튼 자기가 작성하는 코드에 루프가 하나만 들어가면 됩니다.
</code></pre>
<p><a href="http://www.todayhumor.co.kr/board/view.php?table=programmer&amp;no=12810">극악의 c언어 문제</a></p>
<pre><code>-----

  *
 ***
*****
 ***
  *
-----

for문을 이용해서
별을 출력하는 문제인데
주변에 프로그래밍좀 한다는 친구들도
이 문제는 못풀더군요.
과연 오유 여러분의 실력은 어느정도 될런지..
</code></pre>
<ul>
<li>서로 흑마법을 뽐낼때</li>
<li>별것도 아닌 문제로 키배 뜨고있을때</li>
<li>&ldquo;C언어로 별표 삼각형 어떻게 그려요?&ldquo;같은 과제수준의 질문을 봤을때</li>
</ul>
<p>위와 같은 상황에서 트롤링 목적으로 사용할수 있다.
이 코드를 쓰면 웬만해서는 변태로 인정받을수 있을거다.</p>

    </section>

    <ul class="articles-timeline">
      <li class="previous-article">
        
        <a href="https://libsora.so/posts/twitter-image-archive-post-mortem/" title="Next: Twitter Image Archive 개발 포스트모템">
          Twitter Image Archive 개발 포스트모템
          
          <br/><small>트위터 계정 폭파시키기 전에 짤 백업하기</small>
          
        </a>
        
      </li>

      <li class="next-article">
        
        <a href="https://libsora.so/posts/double-loop-with-array/" title="Previous: 반복문, 재귀없이 터미널에 다이아 그리기">
          반복문, 재귀없이 터미널에 다이아 그리기
          
          <br/><small>배열을 이용한 흑마법</small>
          
        </a>
        
      </li>
    </ul>

    <section class="entry-content">
      <section class="disqus-section">
<h1 hidden>Comment</h1>
<div id="disqus_thread"></div>
<script type="text/javascript">
  var host = "libsora.so";
  if (host == window.location.host) {
    var disqus_shortname = 'libsora';
    var disqus_identifier = 'http://libsora.so\/posts\/recursion-with-destructor\/';

    (function() {
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  } else {
    console.log("skip disqus");
  }
</script>
<noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>

    </section>
  </article>
</div>

<footer class="footer">
  <ul class="nav-link-list">
    
    
    
    <li>
      
      <a href="//twitter.com/if1live" title="Twitter"><i class="fa fa-twitter"> </i></a>
    </li>
    
    
    
    <li>
      
      <a href="//github.com/if1live" title="GitHub"><i class="fa fa-github"> </i></a>
    </li>
    
    
    
    <li>
      
      <a href="//bitbucket.org/if1live" title="BitBucket"><i class="fa fa-bitbucket"> </i></a>
    </li>
    

    <li>
      
      <a href="https://libsora.so/index.xml"><i class="fa fa-rss"> </i></a>
    </li>

    
  </ul>

  <p>
    <a href="//gohugo.io/" title="Hugo">Hugo</a> |
    
    <a href="//twitter.com/if1live/" title="@if1live">@if1live</a>
    
  </p>
</footer>

<script src="/js/common.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/prism.min.js"
  integrity="sha512-9+422Bs3A87UkWfp+qV80Nfv9arhbCXKY1rxrF2seorI36mIIstMiuBfyKLF1yH1nnzQkEWq2xrzT4XU3Z+vrA=="
  crossorigin="anonymous"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/plugins/line-numbers/prism-line-numbers.min.js"
  integrity="sha512-1oLZvExT5RaW4q2GgvRPf+XzVVGmsKirfZBRN7aifdOpvZ1L9idEncfMFlfHiQNGBA+Sev+alscSAT/xQ0rwXA=="
  crossorigin="anonymous"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-clike.min.js"
  integrity="sha512-/WJ9ZNER39LEXW4XzFoMR6ct++/HT++A71MDW2gBbUJExj8hFRtde5Q5QzcHyBMxU97VeH1wEHGBRtNuGJpV4w=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-c.min.js"
  integrity="sha512-TO7UeOg1N67oP7UU2OzrOm0oZrTz2TXGNRtkf/x+d9Pt5O8cb5jeSRcryiXqW/Nd25VEc8Qqtu8Dx1EVV7AJLQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-cpp.min.js"
  integrity="sha512-dzF2RO45FHCMPdWDQ3I7Cn9xPvCM8x8T4ODz+kSPQl5CAuIMy6Ekb2i2DAjLEpG/V/DL9f/O7+9E/HZQQx89IA=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-typescript.min.js"
  integrity="sha512-5KnWNKu6jz8OE4nIBndz3PZ4O3RGqcPNcsyEFZkx3F5N8liSwc3bCe4qPOa/a3+e4CxVl0izHMXeZ0Z4yk7LTA=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-python.min.js"
  integrity="sha512-EXseTM1JV8e3AonU5PfOUmzbPkUTRm4c4hVxv206gVeWZE/FwzSQBNWrUBaHsN3Idq9k76BEjUlXpluX1UFx6Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-javascript.min.js"
  integrity="sha512-UN3RxBb1KfsWQUMNl19SU/JPer3v8jTBpfGyQaBEuaVjP5q0Gz9ihj8MiHEUZYnc1krYRm5imVebjq1egsSaKA=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-java.min.js"
  integrity="sha512-p2vAaPEsPvlIESCpoEI5IyzZowfdVZ2O39PsrOrkuTQl+AjD57T4L/Wxv5S8WCToLou0twQZaWO+tt660Rqb6Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-csharp.min.js"
  integrity="sha512-qvSIQfI/qEeMC1E1LMSPCsDl8vFzl0rkBfF6dDcnMJxQT+8M2WjSyDGqHQzZa+RChv3jkdKnZAo99BcAbGsnQg=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-bash.min.js"
  integrity="sha512-CILPDr/8BlkkElCeI+f2yMu0fzgwWqpQ0Cdr0busFfySJJ4SoCRivbT6+Z+SWPkjWwBil9NO0tHd6NSfpwiQaA=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-ruby.min.js"
  integrity="sha512-Wgi0cnFpl5EY8xLe1RO+uTsot86wzAbW/BIoqZopPU+8YW79VDqQE9qTe1R+1uhxLsPBHE+nYwACS+eTsE5GtQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-go.min.js"
  integrity="sha512-hVtwzUDz/n7RqQmiQ7xYAJCTTJe5C52Ung+4Kpz2fPRq7nq2h5gHHQe2HRy7f1Tj3OUVgTO5WRx7XuwT624C9Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-less.min.js"
  integrity="sha512-REVnwsprLWmQbtt0WjkS59nMvtKE0olIjUx+N/k3Gqa5WhmrZ7o0ahGhKYnIK6W2+ITg4cQ2UqZkka4RaZSM9Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-scss.min.js"
  integrity="sha512-rAb9BrnkhMpxN7NoOM7WwPa3phfCMMUZw568Tyzlj9frNsdUUeltfCTATD6ccnVLtnERR+ZXS85Ybs7wo9IiTQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-css.min.js"
  integrity="sha512-zDjwO/e5eVa5WfYra8CE827RFyA/nqhp8y4da+geEpAqpCnmfAHopCNobQ9sJeLBMQY0OLB+hT+k6bbb0FhdYQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-json.min.js"
  integrity="sha512-IC7rV8RslChgByOdUFC6ePqOGn+OwJhnKC3S5AezM8DAiOdGhJMwgsIvBChsa2yuxxoPbH2+W/kjNUM1cc+jUQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-yaml.min.js"
  integrity="sha512-j9sRnEoasdNn9OSwsCxjrQi1H55NqBFDJ+oe7me3sIfvDLeTyzvnZXf0eJqL5CvX6rswU2Sld9PnTVQ0Xy2CFQ=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-batch.min.js"
  integrity="sha512-YzSVmlznJS4QEi5/tSS9iZ/tVFGdQSKO/F2jsofNH+5PifywJfsOtOZaia+URhumCMdXTTG2UZQ4vtBHWids+Q=="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/components/prism-lisp.min.js"
  integrity="sha512-3c6jwEnUKsrvucb8b9xdDJw13zOdbeP83PvlSKeoTCCWGacG03MUWHCcBev2NKHA+w8IAWZsGXBcNMaIH/VWYA=="
  crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.8.3/mermaid.min.js"
  integrity="sha512-+TNmhaRJf3jyYHTpzEq/5I6b+aGyhzWb21mGdHAjxSGSYwxN9Grug3Y3B9qVxWfKKY8MscE/6mr9walWvFLFvQ=="
  crossorigin="anonymous"></script>

<script>
  mermaid.initialize({ startOnLoad: true });

  (function () {
    const elems = document.querySelectorAll('code.language-mermaid');
    for (let i = 0; i < elems.length; i++) {
      const id = `mermaid-${i}`;
      const elem = elems[i];
      const source = elem.innerText;
      const cb = (svg) => {
        const div = document.createElement('div');
        div.innerHTML = svg;
        elem.parentElement.replaceWith(div);
      };
      mermaid.render(id, source, cb);
    }
  })();
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js"
  integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg=="
  crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js"
  integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg=="
  crossorigin="anonymous"></script>

<script>
  renderMathInElement(document.body,
    {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false },
      ]
    }
  );

  var inlineMathArray = document.querySelectorAll("script[type='math/tex']");
  for (var i = 0; i < inlineMathArray.length; i++) {
    var inlineMath = inlineMathArray[i];
    var tex = inlineMath.innerText || inlineMath.textContent;
    var replaced = document.createElement("span");
    replaced.innerHTML = katex.renderToString(tex, { displayMode: false });
    inlineMath.parentNode.replaceChild(replaced, inlineMath);
  }

  var displayMathArray = document.querySelectorAll("script[type='math/tex; mode=display']");
  for (var i = 0; i < displayMathArray.length; i++) {
    var displayMath = displayMathArray[i];
    var tex = displayMath.innerHTML;
    var replaced = document.createElement("span");
    replaced.innerHTML = katex.renderToString(tex.replace(/%.*/g, ''), { displayMode: true });
    displayMath.parentNode.replaceChild(replaced, displayMath);
  }
</script>


<script>
  var host = "libsora.so";
  if (host == window.location.host) {
    window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
    ga('create','UA-37862172-2','auto');ga('send','pageview')
  } else {
    console.log("skip google analytics");
  }
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>


</body>
</html>

